---
title: 處理 CSV 和 JSON 檔案
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.openlocfilehash: 52de5207a5169d2f2a7f701fbc078fb422e61e13
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/20/2019
ms.locfileid: "58244909"
---
# <a name="working-with-csv-and-json-files-for-data-solutions"></a><span data-ttu-id="ebad0-102">將 CSV 和 JSON 檔案用於資料解決方案</span><span class="sxs-lookup"><span data-stu-id="ebad0-102">Working with CSV and JSON files for data solutions</span></span>

<span data-ttu-id="ebad0-103">CSV 和 JSON 可能是擷取、交換和儲存非結構化或半結構化資料時最常用的格式。</span><span class="sxs-lookup"><span data-stu-id="ebad0-103">CSV and JSON are likely the most common formats used for ingesting, exchanging, and storing unstructured or semi-structured data.</span></span>

## <a name="about-csv-format"></a><span data-ttu-id="ebad0-104">關於 CSV 格式</span><span class="sxs-lookup"><span data-stu-id="ebad0-104">About CSV format</span></span>

<span data-ttu-id="ebad0-105">CSV (逗點分隔值) 檔案常用來以純文字格式交換系統之間的表格式資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-105">CSV (comma-separated values) files are commonly used to exchange tabular data between systems in plain text.</span></span> <span data-ttu-id="ebad0-106">它們通常包含為資料提供資料行名稱的標頭資料列，但在其他情況下，則被視為半結構化。</span><span class="sxs-lookup"><span data-stu-id="ebad0-106">They typically contain a header row that provides column names for the data, but are otherwise considered semi-structured.</span></span> <span data-ttu-id="ebad0-107">這是因為 CSV 無法以其原有的格式呈現階層式或關聯式資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-107">This is due to the fact that CSVs cannot naturally represent hierarchical or relational data.</span></span> <span data-ttu-id="ebad0-108">資料關聯性通常由有外部索引鍵儲存在一或多個檔案之資料行中的多個 CSV 檔案進行處理，但這些檔案之間的關聯性不會以格式本身表示。</span><span class="sxs-lookup"><span data-stu-id="ebad0-108">Data relationships are typically handled with multiple CSV files, where foreign keys are stored in columns of one or more files, but the relationships between those files are not expressed by the format itself.</span></span> <span data-ttu-id="ebad0-109">CSV 格式的檔案可使用逗點以外的其他分隔符號，例如定位點或空格。</span><span class="sxs-lookup"><span data-stu-id="ebad0-109">Files in CSV format may use other delimiters besides commas, such as tabs or spaces.</span></span>

<span data-ttu-id="ebad0-110">CSV 檔案儘管有其限制，但仍是資料交換的常見選擇，因為各種不同的商業、消費者和科學應用程式均加以支援。</span><span class="sxs-lookup"><span data-stu-id="ebad0-110">Despite their limitations, CSV files are a popular choice for data exchange, because they are supported by a wide range of business, consumer, and scientific applications.</span></span> <span data-ttu-id="ebad0-111">例如，資料庫和試算表程式即可匯入和匯出 CSV 檔案。</span><span class="sxs-lookup"><span data-stu-id="ebad0-111">For example, database and spreadsheet programs can import and export CSV files.</span></span> <span data-ttu-id="ebad0-112">同樣地，大部分的批次和資料流資料處理引擎 (例如 Spark 和 Hadoop) 原本即支援序列化和還原序列化 CSV 格式的檔案，並提供在讀取時套用結構描述的方式。</span><span class="sxs-lookup"><span data-stu-id="ebad0-112">Similarly, most batch and stream data processing engines, such as Spark and Hadoop, natively support serializing and deserializing CSV-formatted files and offer ways to apply a schema on read.</span></span> <span data-ttu-id="ebad0-113">這可為您提供對資料進行查詢，和以更有效率的資料格式儲存訊以加速處理的選項，讓您更輕鬆地使用資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-113">This makes it easier to work with the data, by offering options to query against it and store the information in a more efficient data format for faster processing.</span></span>

## <a name="about-json-format"></a><span data-ttu-id="ebad0-114">關於 JSON 格式</span><span class="sxs-lookup"><span data-stu-id="ebad0-114">About JSON format</span></span>

<span data-ttu-id="ebad0-115">JSON (JavaScript 物件標記法) 資料會顯示為半結構化格式的索引鍵/值組。</span><span class="sxs-lookup"><span data-stu-id="ebad0-115">JSON (JavaScript Object Notation) data is represented as key-value pairs in a semi-structured format.</span></span> <span data-ttu-id="ebad0-116">JSON 常會拿來與 XML 比較，因為兩者都能夠以階層格式儲存資料，並將子資料顯示為其父代的內嵌資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-116">JSON is often compared to XML, as both are capable of storing data in hierarchical format, with child data represented inline with its parent.</span></span> <span data-ttu-id="ebad0-117">兩者都具有自我描述能力，並可供常人閱讀，但 JSON 文件通常小得多，因而廣泛用於線上資料交換，尤其是以 REST 為基礎的 Web 服務出現後，更是如此。</span><span class="sxs-lookup"><span data-stu-id="ebad0-117">Both are self-describing and human readable, but JSON documents tend to be much smaller, leading to their popular use in online data exchange, especially with the advent of REST-based web services.</span></span>

<span data-ttu-id="ebad0-118">JSON 格式的檔案有幾項優於 CSV 的特點：</span><span class="sxs-lookup"><span data-stu-id="ebad0-118">JSON-formatted files have several benefits over CSV:</span></span>

- <span data-ttu-id="ebad0-119">JSON 可維護階層式結構，因此更易於將相關資料保存在單一文件中，並呈現複雜的關聯性。</span><span class="sxs-lookup"><span data-stu-id="ebad0-119">JSON maintains hierarchical structures, making it easier to hold related data in a single document and represent complex relationships.</span></span>
- <span data-ttu-id="ebad0-120">大部分的程式設計語言皆提供將 JSON 還原序列化為物件的原生支援，或提供輕量型的 JSON 序列化程式庫。</span><span class="sxs-lookup"><span data-stu-id="ebad0-120">Most programming languages provide native support for deserializing JSON into objects, or provide lightweight JSON serialization libraries.</span></span>
- <span data-ttu-id="ebad0-121">JSON 支援物件清單，而有助於避免將雜亂的清單轉譯為關聯式資料模型。</span><span class="sxs-lookup"><span data-stu-id="ebad0-121">JSON supports lists of objects, helping to avoid messy translations of lists into a relational data model.</span></span>
- <span data-ttu-id="ebad0-122">JSON 是經常用於 NoSQL 資料庫 (例如 MongoDB、Couchbase 和 Azure Cosmos DB) 的檔案格式。</span><span class="sxs-lookup"><span data-stu-id="ebad0-122">JSON is a commonly used file format for NoSQL databases, such as MongoDB, Couchbase, and Azure Cosmos DB.</span></span>

<span data-ttu-id="ebad0-123">許多透過網路傳輸的資料原本即為 JSON 格式，因此大部分以 Web 為基礎的程式語言原本就支援與 JSON 搭配使用，或可藉由使用外部程式庫來序列化和還原序列化 JSON 資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-123">Since a lot of data coming across the wire is already in JSON format, most web-based programming languages support working with JSON natively, or through the use of external libraries to serialize and deserialize JSON data.</span></span> <span data-ttu-id="ebad0-124">這種對於 JSON 的通用支援，使 JSON 能夠以邏輯格式運用於資料結構顯示，以交換格式用於熱資料，以及用於冷資料的資料儲存。</span><span class="sxs-lookup"><span data-stu-id="ebad0-124">This universal support for JSON has led to its use in logical formats through data structure representation, exchange formats for hot data, and data storage for cold data.</span></span>

<span data-ttu-id="ebad0-125">許多批次和串流資料處理引擎原本即支援 JSON 序列化和還原序列化。</span><span class="sxs-lookup"><span data-stu-id="ebad0-125">Many batch and stream data processing engines natively support JSON serialization and deserialization.</span></span> <span data-ttu-id="ebad0-126">雖然 JSON 文件內包含的資料最終可能儲存為經過效能最佳化的格式 (例如 Parquet 或 Avro)，但它仍可作為真實來源的原始資料，這在有必要重新處理資料時，是相當重要的。</span><span class="sxs-lookup"><span data-stu-id="ebad0-126">Though the data contained within JSON documents may ultimately be stored in a more performance-optimized formats, such as Parquet or Avro, it serves as the raw data for source of truth, which is critical for reprocessing the data as needed.</span></span>

## <a name="when-to-use-csv-or-json-formats"></a><span data-ttu-id="ebad0-127">使用 CSV 或 JSON 格式的時機</span><span class="sxs-lookup"><span data-stu-id="ebad0-127">When to use CSV or JSON formats</span></span>

<span data-ttu-id="ebad0-128">CSV 較常用來匯出和匯入資料，或處理資料以進行分析和機器學習。</span><span class="sxs-lookup"><span data-stu-id="ebad0-128">CSVs are more commonly used for exporting and importing data, or processing it for analytics and machine learning.</span></span> <span data-ttu-id="ebad0-129">JSON 格式的檔案具有相同的優點，但較常用於熱資料交換解決方案。</span><span class="sxs-lookup"><span data-stu-id="ebad0-129">JSON-formatted files have the same benefits, but are more common in hot data exchange solutions.</span></span> <span data-ttu-id="ebad0-130">JSON 文件常會由 Web 和行動裝置傳送以執行線上交易、由 IoT (物聯網) 裝置傳送以進行單向或雙向通訊，或是由用戶端應用程式傳送，與 SaaS 和 PaaS 服務或無伺服器架構進行通訊。</span><span class="sxs-lookup"><span data-stu-id="ebad0-130">JSON documents are often sent by web and mobile devices performing online transactions, by IoT (internet of things) devices for one-way or bidirectional communication, or by client applications communicating with SaaS and PaaS services or serverless architectures.</span></span>

<span data-ttu-id="ebad0-131">CSV 和 JSON 檔案格式都可簡化不同系統與裝置之間的資料交換。</span><span class="sxs-lookup"><span data-stu-id="ebad0-131">CSV and JSON file formats both make it easy to exchange data between dissimilar systems or devices.</span></span> <span data-ttu-id="ebad0-132">其半結構化格式可提供傳輸絕大多數資料類型的彈性，並提供對於這些格式的通用支援，使其更易於使用。</span><span class="sxs-lookup"><span data-stu-id="ebad0-132">Their semi-structured formats allow flexibility in transferring almost any type of data, and universal support for these formats make them simple to work with.</span></span> <span data-ttu-id="ebad0-133">兩者皆可在已處理的資料以二進位格式儲存時作為真實來源的原始資料，以提高查詢效能。</span><span class="sxs-lookup"><span data-stu-id="ebad0-133">Both can be used as the raw source of truth in cases where the processed data is stored in binary formats for more efficient querying.</span></span>

## <a name="working-with-csv-and-json-data-in-azure"></a><span data-ttu-id="ebad0-134">在 Azure 中使用 CSV 和 JSON 資料</span><span class="sxs-lookup"><span data-stu-id="ebad0-134">Working with CSV and JSON data in Azure</span></span>

<span data-ttu-id="ebad0-135">Azure 根據您的需求提供了數個使用 CSV 和 JSON 檔案的解決方案。</span><span class="sxs-lookup"><span data-stu-id="ebad0-135">Azure provides several solutions for working with CSV and JSON files, depending on your needs.</span></span> <span data-ttu-id="ebad0-136">這些檔案主要登陸位置是 Azure 儲存體或 Azure Data Lake Store。</span><span class="sxs-lookup"><span data-stu-id="ebad0-136">The primary landing place for these files is either Azure Storage or Azure Data Lake Store.</span></span> <span data-ttu-id="ebad0-137">大部分使用這些和其他文字檔案的 Azure 服務，都會與其中一個物件儲存體服務整合。</span><span class="sxs-lookup"><span data-stu-id="ebad0-137">Most Azure services that work with these and other text-based files integrate with either object storage service.</span></span> <span data-ttu-id="ebad0-138">但在某些情況下，您也可以選擇直接將資料匯入 SQL Azure 或其他資料存放區中。</span><span class="sxs-lookup"><span data-stu-id="ebad0-138">In some situations, however, you may opt to directly import the data into Azure SQL or some other data store.</span></span> <span data-ttu-id="ebad0-139">SQL Server 具有儲存和處理 JSON 文件的原生支援，因此可讓您輕鬆地[匯入和處理這些類型的檔案](/sql/relational-databases/json/import-json-documents-into-sql-server)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-139">SQL Server has native support for storing and working with JSON documents, which makes it easy to [import and process those types of files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span> <span data-ttu-id="ebad0-140">您可以輕鬆地使用如「SQL 大量匯入」之類的公用程式，輕鬆地[匯入 CSV 檔案](/sql/relational-databases/json/import-json-documents-into-sql-server)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-140">You can use a utility like SQL Bulk Import to easily [import CSV files](/sql/relational-databases/json/import-json-documents-into-sql-server).</span></span>

<span data-ttu-id="ebad0-141">您也可以直接從 Azure Blob 儲存體查詢 JSON 檔案，而不需要將其匯入 Azure SQL。</span><span class="sxs-lookup"><span data-stu-id="ebad0-141">You can also query JSON files directly from Azure Blob Storage without importing them into Azure SQL.</span></span> <span data-ttu-id="ebad0-142">如需此方法的完整範例，請參閱[使用 Azure SQL 處理 JSON 檔案](https://medium.com/@mauridb/work-with-json-files-with-azure-sql-8946f066ddd4)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-142">For a complete example of this approach, see [Work with JSON files with Azure SQL](https://medium.com/@mauridb/work-with-json-files-with-azure-sql-8946f066ddd4).</span></span> <span data-ttu-id="ebad0-143">目前此選項不適用於 CSV 檔案。</span><span class="sxs-lookup"><span data-stu-id="ebad0-143">Currently this option isn't available for CSV files.</span></span>

<span data-ttu-id="ebad0-144">視情況之不同，您可以執行資料的[批次處理](../big-data/batch-processing.md)或[即時處理](../big-data/real-time-processing.md)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-144">Depending on the scenario, you may perform [batch processing](../big-data/batch-processing.md) or [real-time processing](../big-data/real-time-processing.md) of the data.</span></span>

## <a name="challenges"></a><span data-ttu-id="ebad0-145">挑戰</span><span class="sxs-lookup"><span data-stu-id="ebad0-145">Challenges</span></span>

<span data-ttu-id="ebad0-146">在使用這些格式時，將有若干問題需要克服：</span><span class="sxs-lookup"><span data-stu-id="ebad0-146">There are some challenges to consider when working with these formats:</span></span>

- <span data-ttu-id="ebad0-147">在資料模型不受任何限制的情況下，CSV 和 JSON 檔案很容易發生資料損毀 (「垃圾進、垃圾出」)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-147">Without any restraints on the data model, CSV and JSON files are prone to data corruption ("garbage in, garbage out").</span></span> <span data-ttu-id="ebad0-148">例如，這兩種檔案都沒有日期/時間物件的概念存在，因此，檔案格式不會阻止您在日期欄位中插入 "ABC123" (舉例而言)。</span><span class="sxs-lookup"><span data-stu-id="ebad0-148">For instance, there's no notion of a date/time object in either file, so the file format does not prevent you from inserting "ABC123" in a date field, for example.</span></span>

- <span data-ttu-id="ebad0-149">使用 CSV 和 JSON 檔案作為冷儲存體解決方案，將無法在處理巨量資料時適當調整。</span><span class="sxs-lookup"><span data-stu-id="ebad0-149">Using CSV and JSON files as your cold storage solution does not scale well when working with big data.</span></span> <span data-ttu-id="ebad0-150">在大多數的情況下，它們無法切分為資料分割進行平行處理，也無法壓縮為二進位格式。</span><span class="sxs-lookup"><span data-stu-id="ebad0-150">In most cases, they cannot be split into partitions for parallel processing, and cannot be compressed as well as binary formats.</span></span> <span data-ttu-id="ebad0-151">這常會使這些資料處理並儲存成讀取最佳化格式，例如 Parquet 和 ORC (最佳化資料列單欄式)，因而提供與包含的資料有關的索引和內嵌統計資料。</span><span class="sxs-lookup"><span data-stu-id="ebad0-151">This often leads to processing and storing this data into read-optimized formats such as Parquet and ORC (optimized row columnar), which also provide indexes and inline statistics about the data contained.</span></span>

- <span data-ttu-id="ebad0-152">您可能必須對半結構化資料套用結構描述，使其更易於查詢和分析。</span><span class="sxs-lookup"><span data-stu-id="ebad0-152">You may need to apply a schema on the semi-structured data to make it easier to query and analyze.</span></span> <span data-ttu-id="ebad0-153">為此，您通常需要將資料儲存為其他與環境的資料儲存需求相符的格式，例如儲存在資料庫中。</span><span class="sxs-lookup"><span data-stu-id="ebad0-153">Typically, this requires storing the data in another form that complies with your environment's data storage needs, such as within a database.</span></span>
