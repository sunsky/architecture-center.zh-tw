---
title: 軟體品質的要素
titleSuffix: Azure Application Architecture Guide
description: 說明軟體品質的五大要素，也就是延展性、可用性、復原功能、管理和安全性。
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: d6eed98c6e224956942c45b52621ec02832be015
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/17/2019
ms.locfileid: "59639757"
---
# <a name="pillars-of-software-quality"></a><span data-ttu-id="3fc36-103">軟體品質的要素</span><span class="sxs-lookup"><span data-stu-id="3fc36-103">Pillars of software quality</span></span>

<span data-ttu-id="3fc36-104">成功的雲端應用程式將著重於軟體品質的這五大支柱：延展性、可用性、復原、管理和安全性。</span><span class="sxs-lookup"><span data-stu-id="3fc36-104">A successful cloud application will focus on these five pillars of software quality: Scalability, availability, resiliency, management, and security.</span></span>

| <span data-ttu-id="3fc36-105">要素</span><span class="sxs-lookup"><span data-stu-id="3fc36-105">Pillar</span></span> | <span data-ttu-id="3fc36-106">說明</span><span class="sxs-lookup"><span data-stu-id="3fc36-106">Description</span></span> |
|--------|-------------|
| <span data-ttu-id="3fc36-107">延展性</span><span class="sxs-lookup"><span data-stu-id="3fc36-107">Scalability</span></span> | <span data-ttu-id="3fc36-108">系統處理負載增加的能力。</span><span class="sxs-lookup"><span data-stu-id="3fc36-108">The ability of a system to handle increased load.</span></span> |
| <span data-ttu-id="3fc36-109">可用性</span><span class="sxs-lookup"><span data-stu-id="3fc36-109">Availability</span></span> | <span data-ttu-id="3fc36-110">系統運作並執行作業的時間比例。</span><span class="sxs-lookup"><span data-stu-id="3fc36-110">The proportion of time that a system is functional and working.</span></span> |
| <span data-ttu-id="3fc36-111">復原功能</span><span class="sxs-lookup"><span data-stu-id="3fc36-111">Resiliency</span></span> | <span data-ttu-id="3fc36-112">系統從失敗中復原並繼續運作的能力。</span><span class="sxs-lookup"><span data-stu-id="3fc36-112">The ability of a system to recover from failures and continue to function.</span></span> |
| <span data-ttu-id="3fc36-113">管理</span><span class="sxs-lookup"><span data-stu-id="3fc36-113">Management</span></span> | <span data-ttu-id="3fc36-114">讓系統在生產環境中順利運作的作業流程。</span><span class="sxs-lookup"><span data-stu-id="3fc36-114">Operations processes that keep a system running in production.</span></span> |
| <span data-ttu-id="3fc36-115">安全性</span><span class="sxs-lookup"><span data-stu-id="3fc36-115">Security</span></span> | <span data-ttu-id="3fc36-116">保護應用程式和資料，使其免於威脅。</span><span class="sxs-lookup"><span data-stu-id="3fc36-116">Protecting applications and data from threats.</span></span> |

## <a name="scalability"></a><span data-ttu-id="3fc36-117">延展性</span><span class="sxs-lookup"><span data-stu-id="3fc36-117">Scalability</span></span>

<span data-ttu-id="3fc36-118">延展性是系統處理負載增加的能力。</span><span class="sxs-lookup"><span data-stu-id="3fc36-118">Scalability is the ability of a system to handle increased load.</span></span> <span data-ttu-id="3fc36-119">應用程式有兩種主要的調整方式。</span><span class="sxs-lookup"><span data-stu-id="3fc36-119">There are two main ways that an application can scale.</span></span> <span data-ttu-id="3fc36-120">垂直調整 (「相應增加」) 代表增加資源的容量，例如使用較大的 VM 大小。</span><span class="sxs-lookup"><span data-stu-id="3fc36-120">Vertical scaling (scaling *up*) means increasing the capacity of a resource, for example by using a larger VM size.</span></span> <span data-ttu-id="3fc36-121">水平調整 (「相應放大」) 則會為資源 (例如 VM 或資料庫複本) 新增執行個體。</span><span class="sxs-lookup"><span data-stu-id="3fc36-121">Horizontal scaling (scaling *out*) is adding new instances of a resource, such as VMs or database replicas.</span></span>

<span data-ttu-id="3fc36-122">水平調整的優勢明顯大過垂直調整：</span><span class="sxs-lookup"><span data-stu-id="3fc36-122">Horizontal scaling has significant advantages over vertical scaling:</span></span>

- <span data-ttu-id="3fc36-123">真正的雲端規模。</span><span class="sxs-lookup"><span data-stu-id="3fc36-123">True cloud scale.</span></span> <span data-ttu-id="3fc36-124">可以將應用程式設計成在數百乃至數千個節點上執行，達到單一節點所不可能提供的規模。</span><span class="sxs-lookup"><span data-stu-id="3fc36-124">Applications can be designed to run on hundreds or even thousands of nodes, reaching scales that are not possible on a single node.</span></span>
- <span data-ttu-id="3fc36-125">水平調整具有彈性。</span><span class="sxs-lookup"><span data-stu-id="3fc36-125">Horizontal scale is elastic.</span></span> <span data-ttu-id="3fc36-126">您可以在負載增加時新增更多執行個體，也可以在負載較少時予以移除。</span><span class="sxs-lookup"><span data-stu-id="3fc36-126">You can add more instances if load increases, or remove them during quieter periods.</span></span>
- <span data-ttu-id="3fc36-127">相應放大程序可自動觸發，不論是根據排程或因應負載的變化。</span><span class="sxs-lookup"><span data-stu-id="3fc36-127">Scaling out can be triggered automatically, either on a schedule or in response to changes in load.</span></span>
- <span data-ttu-id="3fc36-128">相應放大的成本可能低於相應增加。</span><span class="sxs-lookup"><span data-stu-id="3fc36-128">Scaling out may be cheaper than scaling up.</span></span> <span data-ttu-id="3fc36-129">執行數個小型 VM 的成本會少於執行單一大型 VM。</span><span class="sxs-lookup"><span data-stu-id="3fc36-129">Running several small VMs can cost less than a single large VM.</span></span>
- <span data-ttu-id="3fc36-130">藉由增加備援執行個體，水平調整也可以提升復原功能。</span><span class="sxs-lookup"><span data-stu-id="3fc36-130">Horizontal scaling can also improve resiliency, by adding redundancy.</span></span> <span data-ttu-id="3fc36-131">如果有某執行個體停止運作，應用程式還是會繼續執行。</span><span class="sxs-lookup"><span data-stu-id="3fc36-131">If an instance goes down, the application keeps running.</span></span>

<span data-ttu-id="3fc36-132">垂直調整的優點是不必變更應用程式就可進行。</span><span class="sxs-lookup"><span data-stu-id="3fc36-132">An advantage of vertical scaling is that you can do it without making any changes to the application.</span></span> <span data-ttu-id="3fc36-133">但是到達一定規模後就會出現限制，而無法再進行相應增加。</span><span class="sxs-lookup"><span data-stu-id="3fc36-133">But at some point you'll hit a limit, where you can't scale any up any more.</span></span> <span data-ttu-id="3fc36-134">屆時，如果要再擴大規模，就必須進行水平調整。</span><span class="sxs-lookup"><span data-stu-id="3fc36-134">At that point, any further scaling must be horizontal.</span></span>

<span data-ttu-id="3fc36-135">水平調整必須設計到系統裡。</span><span class="sxs-lookup"><span data-stu-id="3fc36-135">Horizontal scale must be designed into the system.</span></span> <span data-ttu-id="3fc36-136">例如，您可以將 VM 放在負載平衡器後方，以進行相應放大。</span><span class="sxs-lookup"><span data-stu-id="3fc36-136">For example, you can scale out VMs by placing them behind a load balancer.</span></span> <span data-ttu-id="3fc36-137">但是，集區中的每個 VM 都必須能夠處理任何用戶端要求，因此，應用程式必須是無狀態模式或是將狀態儲存在外部 (例如，儲存在分散式快取)。</span><span class="sxs-lookup"><span data-stu-id="3fc36-137">But each VM in the pool must be able to handle any client request, so the application must be stateless or store state externally (say, in a distributed cache).</span></span> <span data-ttu-id="3fc36-138">受控 PaaS 服務通常都會內建水平調整和自動調整。</span><span class="sxs-lookup"><span data-stu-id="3fc36-138">Managed PaaS services often have horizontal scaling and auto-scaling built in.</span></span> <span data-ttu-id="3fc36-139">能夠輕鬆調整這些服務是使用 PaaS 服務的主要優勢。</span><span class="sxs-lookup"><span data-stu-id="3fc36-139">The ease of scaling these services is a major advantage of using PaaS services.</span></span>

<span data-ttu-id="3fc36-140">能夠輕鬆調整這些服務是使用 PaaS 服務的主要優勢之一。</span><span class="sxs-lookup"><span data-stu-id="3fc36-140">Just adding more instances doesn't mean an application will scale, however.</span></span> <span data-ttu-id="3fc36-141">這種做法可能只是將效能瓶頸推向其他地方。</span><span class="sxs-lookup"><span data-stu-id="3fc36-141">It might simply push the bottleneck somewhere else.</span></span> <span data-ttu-id="3fc36-142">例如，如果您調整 Web 前端來處理更多用戶端要求，這可能會讓資料庫觸發鎖定爭用。</span><span class="sxs-lookup"><span data-stu-id="3fc36-142">For example, if you scale a web front-end to handle more client requests, that might trigger lock contentions in the database.</span></span> <span data-ttu-id="3fc36-143">然後，您就必須考慮採取其他措施 (例如，開放式並行存取或資料分割)，才能提高進入資料庫的輸送量。</span><span class="sxs-lookup"><span data-stu-id="3fc36-143">You would then need to consider additional measures, such as optimistic concurrency or data partitioning, to enable more throughput to the database.</span></span>

<span data-ttu-id="3fc36-144">請一定要進行效能和負載測試，以找出這些潛在的瓶頸。</span><span class="sxs-lookup"><span data-stu-id="3fc36-144">Always conduct performance and load testing to find these potential bottlenecks.</span></span> <span data-ttu-id="3fc36-145">系統的具狀態部分 (例如資料庫) 是最常造成瓶頸的因素，必須謹慎設計才能順利進行水平調整。</span><span class="sxs-lookup"><span data-stu-id="3fc36-145">The stateful parts of a system, such as databases, are the most common cause of bottlenecks, and require careful design to scale horizontally.</span></span> <span data-ttu-id="3fc36-146">解決一個瓶頸可能會讓其他地方又出現瓶頸。</span><span class="sxs-lookup"><span data-stu-id="3fc36-146">Resolving one bottleneck may reveal other bottlenecks elsewhere.</span></span>

<span data-ttu-id="3fc36-147">請使用[延展性檢查清單][scalability-checklist]，從延展性的角度檢視您的設計。</span><span class="sxs-lookup"><span data-stu-id="3fc36-147">Use the [Scalability checklist][scalability-checklist] to review your design from a scalability standpoint.</span></span>

### <a name="scalability-guidance"></a><span data-ttu-id="3fc36-148">延展性指導方針</span><span class="sxs-lookup"><span data-stu-id="3fc36-148">Scalability guidance</span></span>

- <span data-ttu-id="3fc36-149">[延展性和效能的設計模式][scalability-patterns]</span><span class="sxs-lookup"><span data-stu-id="3fc36-149">[Design patterns for scalability and performance][scalability-patterns]</span></span>
- <span data-ttu-id="3fc36-150">最佳做法：[自動調整][autoscale]、[背景作業][background-jobs]、[快取][caching]、[CDN][cdn]、[資料分割][data-partitioning]</span><span class="sxs-lookup"><span data-stu-id="3fc36-150">Best practices: [Autoscaling][autoscale], [Background jobs][background-jobs], [Caching][caching], [CDN][cdn], [Data partitioning][data-partitioning]</span></span>

## <a name="availability"></a><span data-ttu-id="3fc36-151">可用性</span><span class="sxs-lookup"><span data-stu-id="3fc36-151">Availability</span></span>

<span data-ttu-id="3fc36-152">可用性是系統正常運作並執行作業的時間比例。</span><span class="sxs-lookup"><span data-stu-id="3fc36-152">Availability is the proportion of time that the system is functional and working.</span></span> <span data-ttu-id="3fc36-153">通常以運作時間百分比加以測量。</span><span class="sxs-lookup"><span data-stu-id="3fc36-153">It is usually measured as a percentage of uptime.</span></span> <span data-ttu-id="3fc36-154">應用程式錯誤、基礎結構問題和系統負載全都有可能會降低可用性。</span><span class="sxs-lookup"><span data-stu-id="3fc36-154">Application errors, infrastructure problems, and system load can all reduce availability.</span></span>

<span data-ttu-id="3fc36-155">雲端應用程式應該會有服務等級目標 (SLO)，以清楚定義預期的可用性以及可用性的測量方式。</span><span class="sxs-lookup"><span data-stu-id="3fc36-155">A cloud application should have a service level objective (SLO) that clearly defines the expected availability, and how the availability is measured.</span></span> <span data-ttu-id="3fc36-156">在定義可用性時，應關注關鍵路徑。</span><span class="sxs-lookup"><span data-stu-id="3fc36-156">When defining availability, look at the critical path.</span></span> <span data-ttu-id="3fc36-157">Web 前端或許可以服務用戶端要求，但如果每一筆交易都因為它無法連線到資料庫而失敗，使用者就無法使用應用程式。</span><span class="sxs-lookup"><span data-stu-id="3fc36-157">The web front-end might be able to service client requests, but if every transaction fails because it can't connect to the database, the application is not available to users.</span></span>

<span data-ttu-id="3fc36-158">可用性通常是以「幾個 9」來描述，例如，「四個 9」表示 99.99% 的運作時間。</span><span class="sxs-lookup"><span data-stu-id="3fc36-158">Availability is often described in terms of "9s" &mdash; for example, "four 9s" means 99.99% uptime.</span></span> <span data-ttu-id="3fc36-159">下表顯示各種可用性等級的潛在累計停機時間。</span><span class="sxs-lookup"><span data-stu-id="3fc36-159">The following table shows the potential cumulative downtime at different availability levels.</span></span>

| <span data-ttu-id="3fc36-160">運作時間 %</span><span class="sxs-lookup"><span data-stu-id="3fc36-160">% Uptime</span></span> | <span data-ttu-id="3fc36-161">每週停機時間</span><span class="sxs-lookup"><span data-stu-id="3fc36-161">Downtime per week</span></span> | <span data-ttu-id="3fc36-162">每月停機時間</span><span class="sxs-lookup"><span data-stu-id="3fc36-162">Downtime per month</span></span> | <span data-ttu-id="3fc36-163">每年停機時間</span><span class="sxs-lookup"><span data-stu-id="3fc36-163">Downtime per year</span></span> |
|----------|-------------------|--------------------|-------------------|
| <span data-ttu-id="3fc36-164">99%</span><span class="sxs-lookup"><span data-stu-id="3fc36-164">99%</span></span> | <span data-ttu-id="3fc36-165">1.68 小時</span><span class="sxs-lookup"><span data-stu-id="3fc36-165">1.68 hours</span></span> | <span data-ttu-id="3fc36-166">7.2 小時</span><span class="sxs-lookup"><span data-stu-id="3fc36-166">7.2 hours</span></span> | <span data-ttu-id="3fc36-167">3.65 天</span><span class="sxs-lookup"><span data-stu-id="3fc36-167">3.65 days</span></span> |
| <span data-ttu-id="3fc36-168">99.9%</span><span class="sxs-lookup"><span data-stu-id="3fc36-168">99.9%</span></span> | <span data-ttu-id="3fc36-169">10 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-169">10 minutes</span></span> | <span data-ttu-id="3fc36-170">43.2 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-170">43.2 minutes</span></span> | <span data-ttu-id="3fc36-171">8.76 小時</span><span class="sxs-lookup"><span data-stu-id="3fc36-171">8.76 hours</span></span> |
| <span data-ttu-id="3fc36-172">99.95%</span><span class="sxs-lookup"><span data-stu-id="3fc36-172">99.95%</span></span> | <span data-ttu-id="3fc36-173">5 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-173">5 minutes</span></span> | <span data-ttu-id="3fc36-174">21.6 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-174">21.6 minutes</span></span> | <span data-ttu-id="3fc36-175">4.38 小時</span><span class="sxs-lookup"><span data-stu-id="3fc36-175">4.38 hours</span></span> |
| <span data-ttu-id="3fc36-176">99.99%</span><span class="sxs-lookup"><span data-stu-id="3fc36-176">99.99%</span></span> | <span data-ttu-id="3fc36-177">1 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-177">1 minute</span></span> | <span data-ttu-id="3fc36-178">4.32 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-178">4.32 minutes</span></span> | <span data-ttu-id="3fc36-179">52.56 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-179">52.56 minutes</span></span> |
| <span data-ttu-id="3fc36-180">99.999%</span><span class="sxs-lookup"><span data-stu-id="3fc36-180">99.999%</span></span> | <span data-ttu-id="3fc36-181">6 秒</span><span class="sxs-lookup"><span data-stu-id="3fc36-181">6 seconds</span></span> | <span data-ttu-id="3fc36-182">26 秒</span><span class="sxs-lookup"><span data-stu-id="3fc36-182">26 seconds</span></span> | <span data-ttu-id="3fc36-183">5.26 分鐘</span><span class="sxs-lookup"><span data-stu-id="3fc36-183">5.26 minutes</span></span> |

<span data-ttu-id="3fc36-184">請注意，99% 的運作時間相當於每週會有將近 2 小時的服務中斷時間。</span><span class="sxs-lookup"><span data-stu-id="3fc36-184">Notice that 99% uptime could translate to an almost 2-hour service outage per week.</span></span> <span data-ttu-id="3fc36-185">對於許多應用程式來說，尤其是消費者導向的應用程式，這樣的 SLO 令人無法接受。</span><span class="sxs-lookup"><span data-stu-id="3fc36-185">For many applications, especially consumer-facing applications, that is not an acceptable SLO.</span></span> <span data-ttu-id="3fc36-186">另一方面，五個 9 (99.999%) 代表「一年」當中的停機時間不會超過 5 分鐘。</span><span class="sxs-lookup"><span data-stu-id="3fc36-186">On the other hand, five 9s (99.999%) means no more than 5 minutes of downtime in a *year*.</span></span> <span data-ttu-id="3fc36-187">光是快速偵測出中斷情形就很困難了，更別說要解決問題。</span><span class="sxs-lookup"><span data-stu-id="3fc36-187">It's challenging enough just detecting an outage that quickly, let alone resolving the issue.</span></span> <span data-ttu-id="3fc36-188">若要有相當高的可用性 (99.99% 或以上)，您不能想要靠人為方式從失敗中復原。</span><span class="sxs-lookup"><span data-stu-id="3fc36-188">To get very high availability (99.99% or higher), you can't rely on manual intervention to recover from failures.</span></span> <span data-ttu-id="3fc36-189">應用程式必須能夠自我診斷和自我修復，因此復原功能就顯得重要。</span><span class="sxs-lookup"><span data-stu-id="3fc36-189">The application must be self-diagnosing and self-healing, which is where resiliency becomes crucial.</span></span>

<span data-ttu-id="3fc36-190">在 Azure 中，服務等級協定 (SLA) 描述 Microsoft 對執行時間與連線能力的承諾。</span><span class="sxs-lookup"><span data-stu-id="3fc36-190">In Azure, the Service Level Agreement (SLA) describes Microsoft's commitments for uptime and connectivity.</span></span> <span data-ttu-id="3fc36-191">如果特定服務的 SLA 是 99.95%，表示您應該預期 99.95% 的時間皆可提供服務。</span><span class="sxs-lookup"><span data-stu-id="3fc36-191">If the SLA for a particular service is 99.95%, it means you should expect the service to be available 99.95% of the time.</span></span>

<span data-ttu-id="3fc36-192">應用程式經常依賴多個服務。</span><span class="sxs-lookup"><span data-stu-id="3fc36-192">Applications often depend on multiple services.</span></span> <span data-ttu-id="3fc36-193">一般情況下，服務發生停機的機率是各自獨立的。</span><span class="sxs-lookup"><span data-stu-id="3fc36-193">In general, the probability of either service having downtime is independent.</span></span> <span data-ttu-id="3fc36-194">例如，假設您的應用程式依賴兩個服務，這兩個服務各有 99.9% 的 SLA。</span><span class="sxs-lookup"><span data-stu-id="3fc36-194">For example, suppose your application depends on two services, each with a 99.9% SLA.</span></span> <span data-ttu-id="3fc36-195">這兩個服務的複合 SLA 是 99.9% &times; 99.9% &asymp; 99.8%，也就是略低於每個服務本身的 SLA。</span><span class="sxs-lookup"><span data-stu-id="3fc36-195">The composite SLA for both services is 99.9% &times; 99.9% &asymp; 99.8%, or slightly less than each service by itself.</span></span>

### <a name="availability-guidance"></a><span data-ttu-id="3fc36-196">可用性指導方針</span><span class="sxs-lookup"><span data-stu-id="3fc36-196">Availability guidance</span></span>

- <span data-ttu-id="3fc36-197">[可用性的設計模式][availability-patterns]</span><span class="sxs-lookup"><span data-stu-id="3fc36-197">[Design patterns for availability][availability-patterns]</span></span>
- <span data-ttu-id="3fc36-198">最佳做法：[自動調整][autoscale]、[背景作業][background-jobs]</span><span class="sxs-lookup"><span data-stu-id="3fc36-198">Best practices: [Autoscaling][autoscale], [Background jobs][background-jobs]</span></span>

## <a name="resiliency"></a><span data-ttu-id="3fc36-199">災害復原</span><span class="sxs-lookup"><span data-stu-id="3fc36-199">Resiliency</span></span>

<span data-ttu-id="3fc36-200">災害復原是指系統從失敗中復原並繼續運作的能力。</span><span class="sxs-lookup"><span data-stu-id="3fc36-200">Resiliency is the ability of the system to recover from failures and continue to function.</span></span> <span data-ttu-id="3fc36-201">災害復原的目標是使應用程式在發生失敗後，能夠恢復到完全正常運作的狀態。</span><span class="sxs-lookup"><span data-stu-id="3fc36-201">The goal of resiliency is to return the application to a fully functioning state after a failure occurs.</span></span> <span data-ttu-id="3fc36-202">恢復能力與可用性緊密相關。</span><span class="sxs-lookup"><span data-stu-id="3fc36-202">Resiliency is closely related to availability.</span></span>

<span data-ttu-id="3fc36-203">傳統上在開發應用程式時，會將焦點放在減少平均失敗時間 (MTBF)。</span><span class="sxs-lookup"><span data-stu-id="3fc36-203">In traditional application development, there has been a focus on reducing mean time between failures (MTBF).</span></span> <span data-ttu-id="3fc36-204">心力會花在嘗試避免系統發生失敗。</span><span class="sxs-lookup"><span data-stu-id="3fc36-204">Effort was spent trying to prevent the system from failing.</span></span> <span data-ttu-id="3fc36-205">在雲端運算中，則需要不同的思維，原因如下：</span><span class="sxs-lookup"><span data-stu-id="3fc36-205">In cloud computing, a different mindset is required, due to several factors:</span></span>

- <span data-ttu-id="3fc36-206">分散式系統很複雜，某處發生失敗很可能會讓整個系統發生連鎖反應。</span><span class="sxs-lookup"><span data-stu-id="3fc36-206">Distributed systems are complex, and a failure at one point can potentially cascade throughout the system.</span></span>
- <span data-ttu-id="3fc36-207">為了維持低成本，雲端環境會使用標準規格之硬體，因此一定會偶有硬體發生故障情形。</span><span class="sxs-lookup"><span data-stu-id="3fc36-207">Costs for cloud environments are kept low through the use of commodity hardware, so occasional hardware failures must be expected.</span></span>
- <span data-ttu-id="3fc36-208">應用程式經常依賴外部服務，但這些外部服務可能會暫時無法使用，或是針對大量使用者進行限流處理。</span><span class="sxs-lookup"><span data-stu-id="3fc36-208">Applications often depend on external services, which may become temporarily unavailable or throttle high-volume users.</span></span>
- <span data-ttu-id="3fc36-209">現今的使用者都期望應用程式應全天候都隨時可用，永遠不會離線。</span><span class="sxs-lookup"><span data-stu-id="3fc36-209">Today's users expect an application to be available 24/7 without ever going offline.</span></span>

<span data-ttu-id="3fc36-210">綜合上述之因素，雲端應用程式必須設計成預期會偶爾發生失敗並可以從中復原。</span><span class="sxs-lookup"><span data-stu-id="3fc36-210">All of these factors mean that cloud applications must be designed to expect occasional failures and recover from them.</span></span> <span data-ttu-id="3fc36-211">Azure 平台已內建許多災害復原功能。</span><span class="sxs-lookup"><span data-stu-id="3fc36-211">Azure has many resiliency features already built into the platform.</span></span> <span data-ttu-id="3fc36-212">例如︰</span><span class="sxs-lookup"><span data-stu-id="3fc36-212">For example:</span></span>

- <span data-ttu-id="3fc36-213">Azure 儲存體、SQL Database 和 Cosmos DB 全都提供內建的資料複寫功能，不論是單一區域內或是跨區域皆有提供。</span><span class="sxs-lookup"><span data-stu-id="3fc36-213">Azure Storage, SQL Database, and Cosmos DB all provide built-in data replication, both within a region and across regions.</span></span>
- <span data-ttu-id="3fc36-214">Azure 受控磁碟會自動放在不同的儲存體縮放單位，以限制硬體故障的影響程度。</span><span class="sxs-lookup"><span data-stu-id="3fc36-214">Azure Managed Disks are automatically placed in different storage scale units, to limit the effects of hardware failures.</span></span>
- <span data-ttu-id="3fc36-215">可用性設定組中的 VM 會分散到數個容錯網域。</span><span class="sxs-lookup"><span data-stu-id="3fc36-215">VMs in an availability set are spread across several fault domains.</span></span> <span data-ttu-id="3fc36-216">容錯網域是一組 VM，這些 VM 會共用電力來源和網路交換器。</span><span class="sxs-lookup"><span data-stu-id="3fc36-216">A fault domain is a group of VMs that share a common power source and network switch.</span></span> <span data-ttu-id="3fc36-217">將 VM 分散到不同的容錯網域可以減少當實體硬體故障、網路中斷或電源中斷所產生的影響。</span><span class="sxs-lookup"><span data-stu-id="3fc36-217">Spreading VMs across fault domains limits the impact of physical hardware failures, network outages, or power interruptions.</span></span>

<span data-ttu-id="3fc36-218">話雖如此，您仍需要在應用程式中建置復原功能。</span><span class="sxs-lookup"><span data-stu-id="3fc36-218">That said, you still need to build resiliency into your application.</span></span> <span data-ttu-id="3fc36-219">復原策略可以套用到系統架構中的所有層級。</span><span class="sxs-lookup"><span data-stu-id="3fc36-219">Resiliency strategies can be applied at all levels of the architecture.</span></span> <span data-ttu-id="3fc36-220">某些緩和措施在本質上更有戰術優勢，例如，在暫時性的網路失敗後重試遠端呼叫。</span><span class="sxs-lookup"><span data-stu-id="3fc36-220">Some mitigations are more tactical in nature &mdash; for example, retrying a remote call after a transient network failure.</span></span> <span data-ttu-id="3fc36-221">其他緩和措施則較有策略意義，例如將整個應用程式容錯移轉到次要區域。</span><span class="sxs-lookup"><span data-stu-id="3fc36-221">Other mitigations are more strategic, such as failing over the entire application to a secondary region.</span></span> <span data-ttu-id="3fc36-222">戰術性緩和措施會產生極大的影響。</span><span class="sxs-lookup"><span data-stu-id="3fc36-222">Tactical mitigations can make a big difference.</span></span> <span data-ttu-id="3fc36-223">雖然很少遇到整個區域都發生中斷的情況，但網路壅塞之類的暫時性問題並不罕見，因此請先以此做為標的。</span><span class="sxs-lookup"><span data-stu-id="3fc36-223">While it's rare for an entire region to experience a disruption, transient problems such as network congestion are more common &mdash; so target these first.</span></span> <span data-ttu-id="3fc36-224">擁有適當的監視和診斷能力也很重要，這樣才能偵測到失敗的發生，並找出根本原因。</span><span class="sxs-lookup"><span data-stu-id="3fc36-224">Having the right monitoring and diagnostics is also important, both to detect failures when they happen, and to find the root causes.</span></span>

<span data-ttu-id="3fc36-225">在為應用程式設計復原功能時，您必須了解您的可用性需求。</span><span class="sxs-lookup"><span data-stu-id="3fc36-225">When designing an application to be resilient, you must understand your availability requirements.</span></span> <span data-ttu-id="3fc36-226">可接受多少停機時間？</span><span class="sxs-lookup"><span data-stu-id="3fc36-226">How much downtime is acceptable?</span></span> <span data-ttu-id="3fc36-227">這是有一部分是成本的功能。</span><span class="sxs-lookup"><span data-stu-id="3fc36-227">This is partly a function of cost.</span></span> <span data-ttu-id="3fc36-228">可能的停機時間會造成多少業務成本？</span><span class="sxs-lookup"><span data-stu-id="3fc36-228">How much will potential downtime cost your business?</span></span> <span data-ttu-id="3fc36-229">您應該將多少成本投資於此應用程式的高可用性？</span><span class="sxs-lookup"><span data-stu-id="3fc36-229">How much should you invest in making the application highly available?</span></span>

### <a name="resiliency-guidance"></a><span data-ttu-id="3fc36-230">災害復原指導方針</span><span class="sxs-lookup"><span data-stu-id="3fc36-230">Resiliency guidance</span></span>

- <span data-ttu-id="3fc36-231">[設計可靠的 Azure 應用程式][resiliency]</span><span class="sxs-lookup"><span data-stu-id="3fc36-231">[Designing reliable Azure applications][resiliency]</span></span>
- <span data-ttu-id="3fc36-232">[災害復原的設計模式][resiliency-patterns]</span><span class="sxs-lookup"><span data-stu-id="3fc36-232">[Design patterns for resiliency][resiliency-patterns]</span></span>
- <span data-ttu-id="3fc36-233">最佳做法：[暫時性錯誤的處理][transient-fault-handling]、[特定服務的重試指引][retry-service-specific]</span><span class="sxs-lookup"><span data-stu-id="3fc36-233">Best practices: [Transient fault handling][transient-fault-handling], [Retry guidance for specific services][retry-service-specific]</span></span>

## <a name="management-and-devops"></a><span data-ttu-id="3fc36-234">管理性和 DevOps</span><span class="sxs-lookup"><span data-stu-id="3fc36-234">Management and DevOps</span></span>

<span data-ttu-id="3fc36-235">此要素涵蓋讓應用程式在生產環境中執行的作業流程。</span><span class="sxs-lookup"><span data-stu-id="3fc36-235">This pillar covers the operations processes that keep an application running in production.</span></span>

<span data-ttu-id="3fc36-236">部署必須可靠且可預測。</span><span class="sxs-lookup"><span data-stu-id="3fc36-236">Deployments must be reliable and predictable.</span></span> <span data-ttu-id="3fc36-237">請將部署程序自動化，以免發生人為錯誤。</span><span class="sxs-lookup"><span data-stu-id="3fc36-237">They should be automated to reduce the chance of human error.</span></span> <span data-ttu-id="3fc36-238">部署程序應該迅速並成為例行工作，以免拖累新功能或錯誤修正的發行速度。</span><span class="sxs-lookup"><span data-stu-id="3fc36-238">They should be a fast and routine process, so they don't slow down the release of new features or bug fixes.</span></span> <span data-ttu-id="3fc36-239">同樣重要的是，您必須能夠在更新發生問題時快速復原或向前復原。</span><span class="sxs-lookup"><span data-stu-id="3fc36-239">Equally important, you must be able to quickly roll back or roll forward if an update has problems.</span></span>

<span data-ttu-id="3fc36-240">監視和診斷能力極為重要。</span><span class="sxs-lookup"><span data-stu-id="3fc36-240">Monitoring and diagnostics are crucial.</span></span> <span data-ttu-id="3fc36-241">雲端應用程式會在遠端資料中心內執行，而您並沒有其基礎結構或作業系統 (有時候) 的完整控制權。</span><span class="sxs-lookup"><span data-stu-id="3fc36-241">Cloud applications run in a remote datacenter where you do not have full control of the infrastructure or, in some cases, the operating system.</span></span> <span data-ttu-id="3fc36-242">在大型應用程式中，登入 VM 來疑難排解問題或詳查記錄檔是不切實際的行為。</span><span class="sxs-lookup"><span data-stu-id="3fc36-242">In a large application, it's not practical to log into VMs to troubleshoot an issue or sift through log files.</span></span> <span data-ttu-id="3fc36-243">在使用 PaaS 服務時，甚至可能沒有可供登入的專用 VM。</span><span class="sxs-lookup"><span data-stu-id="3fc36-243">With PaaS services, there may not even be a dedicated VM to log into.</span></span> <span data-ttu-id="3fc36-244">監視和診斷能力可讓您深入了解系統，以在失敗發生時得知消息並知道其發生位置。</span><span class="sxs-lookup"><span data-stu-id="3fc36-244">Monitoring and diagnostics give insight into the system, so that you know when and where failures occur.</span></span> <span data-ttu-id="3fc36-245">系統必須全都可供觀察。</span><span class="sxs-lookup"><span data-stu-id="3fc36-245">All systems must be observable.</span></span> <span data-ttu-id="3fc36-246">請使用通用且一致的記錄結構描述，以便讓系統中的所有事件相互關聯。</span><span class="sxs-lookup"><span data-stu-id="3fc36-246">Use a common and consistent logging schema that lets you correlate events across systems.</span></span>

<span data-ttu-id="3fc36-247">監視和診斷程序有數個不同的階段：</span><span class="sxs-lookup"><span data-stu-id="3fc36-247">The monitoring and diagnostics process has several distinct phases:</span></span>

- <span data-ttu-id="3fc36-248">檢測。</span><span class="sxs-lookup"><span data-stu-id="3fc36-248">Instrumentation.</span></span> <span data-ttu-id="3fc36-249">從應用程式記錄、Web 伺服器記錄、Azure 平台內建的診斷功能以及其他來源，產生未經處理的資料。</span><span class="sxs-lookup"><span data-stu-id="3fc36-249">Generating the raw data, from application logs, web server logs, diagnostics built into the Azure platform, and other sources.</span></span>
- <span data-ttu-id="3fc36-250">收集和儲存。</span><span class="sxs-lookup"><span data-stu-id="3fc36-250">Collection and storage.</span></span> <span data-ttu-id="3fc36-251">將資料合併到一處。</span><span class="sxs-lookup"><span data-stu-id="3fc36-251">Consolidating the data into one place.</span></span>
- <span data-ttu-id="3fc36-252">分析及診斷。</span><span class="sxs-lookup"><span data-stu-id="3fc36-252">Analysis and diagnosis.</span></span> <span data-ttu-id="3fc36-253">若要疑難排解問題，請參閱整體健康情況。</span><span class="sxs-lookup"><span data-stu-id="3fc36-253">To troubleshoot issues and see the overall health.</span></span>
- <span data-ttu-id="3fc36-254">視覺效果和警示。</span><span class="sxs-lookup"><span data-stu-id="3fc36-254">Visualization and alerts.</span></span> <span data-ttu-id="3fc36-255">使用遙測資料來找出趨勢或對作業小組發出警示。</span><span class="sxs-lookup"><span data-stu-id="3fc36-255">Using telemetry data to spot trends or alert the operations team.</span></span>

<span data-ttu-id="3fc36-256">請使用 [DevOps 檢查清單][ devops-checklist]，從管理和 DevOps 的角度檢視您的設計。</span><span class="sxs-lookup"><span data-stu-id="3fc36-256">Use the [DevOps checklist][devops-checklist] to review your design from a management and DevOps standpoint.</span></span>

### <a name="management-and-devops-guidance"></a><span data-ttu-id="3fc36-257">管理和 DevOps 指導方針</span><span class="sxs-lookup"><span data-stu-id="3fc36-257">Management and DevOps guidance</span></span>

- <span data-ttu-id="3fc36-258">[管理與監視的設計模式][management-patterns]</span><span class="sxs-lookup"><span data-stu-id="3fc36-258">[Design patterns for management and monitoring][management-patterns]</span></span>
- <span data-ttu-id="3fc36-259">最佳做法：[監視和診斷][monitoring]</span><span class="sxs-lookup"><span data-stu-id="3fc36-259">Best practices: [Monitoring and diagnostics][monitoring]</span></span>

## <a name="security"></a><span data-ttu-id="3fc36-260">安全性</span><span class="sxs-lookup"><span data-stu-id="3fc36-260">Security</span></span>

<span data-ttu-id="3fc36-261">您必須思考應用程式從設計和實作到部署與作業之整個生命週期的安全性。</span><span class="sxs-lookup"><span data-stu-id="3fc36-261">You must think about security throughout the entire lifecycle of an application, from design and implementation to deployment and operations.</span></span> <span data-ttu-id="3fc36-262">Azure 平台可防範各種不同威脅，例如網路入侵和 DDoS 攻擊。</span><span class="sxs-lookup"><span data-stu-id="3fc36-262">The Azure platform provides protections against a variety of threats, such as network intrusion and DDoS attacks.</span></span> <span data-ttu-id="3fc36-263">但您仍需要在應用程式和 DevOps 程序中建置安全性。</span><span class="sxs-lookup"><span data-stu-id="3fc36-263">But you still need to build security into your application and into your DevOps processes.</span></span>

<span data-ttu-id="3fc36-264">以下是部分需要考慮的安全性領域。</span><span class="sxs-lookup"><span data-stu-id="3fc36-264">Here are some broad security areas to consider.</span></span>

### <a name="identity-management"></a><span data-ttu-id="3fc36-265">身分識別管理</span><span class="sxs-lookup"><span data-stu-id="3fc36-265">Identity management</span></span>

<span data-ttu-id="3fc36-266">請考慮使用 Azure Active Directory (Azure AD) 來驗證並授權使用者。</span><span class="sxs-lookup"><span data-stu-id="3fc36-266">Consider using Azure Active Directory (Azure AD) to authenticate and authorize users.</span></span> <span data-ttu-id="3fc36-267">Azure AD 是完全受控的身分識別和存取管理服務。</span><span class="sxs-lookup"><span data-stu-id="3fc36-267">Azure AD is a fully managed identity and access management service.</span></span> <span data-ttu-id="3fc36-268">您可以用它建立僅存在於 Azure 的網域，或用它整合您的內部部署 Active Directory 身分識別。</span><span class="sxs-lookup"><span data-stu-id="3fc36-268">You can use it to create domains that exist purely on Azure, or integrate with your on-premises Active Directory identities.</span></span> <span data-ttu-id="3fc36-269">Azure AD 也會整合 Office365、Dynamics CRM Online 和眾多第三方 SaaS 應用程式。</span><span class="sxs-lookup"><span data-stu-id="3fc36-269">Azure AD also integrates with Office365, Dynamics CRM Online, and many third-party SaaS applications.</span></span> <span data-ttu-id="3fc36-270">對於消費者導向的應用程式，Azure Active Directory B2C 可讓使用者使用其現有的社交帳戶 (例如 Facebook、Google 或 LinkedIn) 進行驗證，或建立由 Azure AD 管理的新使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="3fc36-270">For consumer-facing applications, Azure Active Directory B2C lets users authenticate with their existing social accounts (such as Facebook, Google, or LinkedIn), or create a new user account that is managed by Azure AD.</span></span>

<span data-ttu-id="3fc36-271">如果您想要整合內部部署 Active Directory 環境與 Azure 網路，可行的方法有好幾個，端視您的需求而定。</span><span class="sxs-lookup"><span data-stu-id="3fc36-271">If you want to integrate an on-premises Active Directory environment with an Azure network, several approaches are possible, depending on your requirements.</span></span> <span data-ttu-id="3fc36-272">如需詳細資訊，請參閱[身分識別管理][identity-ref-arch]參考架構。</span><span class="sxs-lookup"><span data-stu-id="3fc36-272">For more information, see our [Identity Management][identity-ref-arch] reference architectures.</span></span>

### <a name="protecting-your-infrastructure"></a><span data-ttu-id="3fc36-273">保護您的基礎結構</span><span class="sxs-lookup"><span data-stu-id="3fc36-273">Protecting your infrastructure</span></span>

<span data-ttu-id="3fc36-274">請控制您所部署之 Azure 資源的存取權。</span><span class="sxs-lookup"><span data-stu-id="3fc36-274">Control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="3fc36-275">每個 Azure 訂用帳戶都會與 Azure AD 租用戶有[信任關係][ad-subscriptions]。</span><span class="sxs-lookup"><span data-stu-id="3fc36-275">Every Azure subscription has a [trust relationship][ad-subscriptions] with an Azure AD tenant.</span></span>
<span data-ttu-id="3fc36-276">請使用[角色型存取控制][ rbac] (RBAC) 來為您組織內的使用者授與正確的 Azure 資源權限。</span><span class="sxs-lookup"><span data-stu-id="3fc36-276">Use [Role-Based Access Control][rbac] (RBAC) to grant users within your organization the correct permissions to Azure resources.</span></span> <span data-ttu-id="3fc36-277">若要授與存取權，請將 RBAC 角色指派給某個範圍內的使用者或群組。</span><span class="sxs-lookup"><span data-stu-id="3fc36-277">Grant access by assigning RBAC role to users or groups at a certain scope.</span></span> <span data-ttu-id="3fc36-278">此範圍可以是訂用帳戶、資源群組或是單一資源。</span><span class="sxs-lookup"><span data-stu-id="3fc36-278">The scope can be a subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="3fc36-279">對基礎結構的所有變更進行[稽核][resource-manager-auditing]。</span><span class="sxs-lookup"><span data-stu-id="3fc36-279">[Audit][resource-manager-auditing] all changes to infrastructure.</span></span>

### <a name="application-security"></a><span data-ttu-id="3fc36-280">應用程式安全性</span><span class="sxs-lookup"><span data-stu-id="3fc36-280">Application security</span></span>

<span data-ttu-id="3fc36-281">一般情況下，開發應用程式時的安全性最佳做法仍適用於雲端。</span><span class="sxs-lookup"><span data-stu-id="3fc36-281">In general, the security best practices for application development still apply in the cloud.</span></span> <span data-ttu-id="3fc36-282">這些做法包括在所有地方使用 SSL、防範 CSRF 和 XSS 攻擊、防止 SQL 插入式攻擊等等。</span><span class="sxs-lookup"><span data-stu-id="3fc36-282">These include things like using SSL everywhere, protecting against CSRF and XSS attacks, preventing SQL injection attacks, and so on.</span></span>

<span data-ttu-id="3fc36-283">雲端應用程式通常會使用具有存取金鑰的受控服務。</span><span class="sxs-lookup"><span data-stu-id="3fc36-283">Cloud applications often use managed services that have access keys.</span></span> <span data-ttu-id="3fc36-284">請永遠不要將這些存取金鑰簽入到原始檔控制。</span><span class="sxs-lookup"><span data-stu-id="3fc36-284">Never check these into source control.</span></span> <span data-ttu-id="3fc36-285">您可以考慮將應用程式密碼儲存在 Azure Key Vault。</span><span class="sxs-lookup"><span data-stu-id="3fc36-285">Consider storing application secrets in Azure Key Vault.</span></span>

### <a name="data-sovereignty-and-encryption"></a><span data-ttu-id="3fc36-286">資料主權和加密</span><span class="sxs-lookup"><span data-stu-id="3fc36-286">Data sovereignty and encryption</span></span>

<span data-ttu-id="3fc36-287">在使用 Azure 的高可用性功能時，請確保您的資料會留在正確的地緣政治區域內。</span><span class="sxs-lookup"><span data-stu-id="3fc36-287">Make sure that your data remains in the correct geopolitical zone when using Azure's highly available.</span></span> <span data-ttu-id="3fc36-288">Azure 的異地備援儲存體會在相同的地緣政治區域中使用[配對區域][paired-region]的概念。</span><span class="sxs-lookup"><span data-stu-id="3fc36-288">Azure's geo-replicated storage uses the concept of a [paired region][paired-region] in the same geopolitical region.</span></span>

<span data-ttu-id="3fc36-289">請使用 Key Vault 來保護密碼編譯金鑰和密碼。</span><span class="sxs-lookup"><span data-stu-id="3fc36-289">Use Key Vault to safeguard cryptographic keys and secrets.</span></span> <span data-ttu-id="3fc36-290">藉由使用 Key Vault，您便可以使用硬體安全性模組 (HSM) 所保護的金鑰來加密金鑰和密碼。</span><span class="sxs-lookup"><span data-stu-id="3fc36-290">By using Key Vault, you can encrypt keys and secrets by using keys that are protected by hardware security modules (HSMs).</span></span> <span data-ttu-id="3fc36-291">許多 Azure 儲存體和 DB 服務都支援待用資料加密，包括 [Azure 儲存體][storage-encryption]、[Azure SQL Database][sql-db-encryption]、[Azure SQL 資料倉儲][data-warehouse-encryption]和 [Cosmos DB][cosmosdb-encryption]。</span><span class="sxs-lookup"><span data-stu-id="3fc36-291">Many Azure storage and DB services support data encryption at rest, including [Azure Storage][storage-encryption], [Azure SQL Database][sql-db-encryption], [Azure SQL Data Warehouse][data-warehouse-encryption], and [Cosmos DB][cosmosdb-encryption].</span></span>

### <a name="security-resources"></a><span data-ttu-id="3fc36-292">安全性資源</span><span class="sxs-lookup"><span data-stu-id="3fc36-292">Security resources</span></span>

- <span data-ttu-id="3fc36-293">[Azure 資訊安全中心][security-center]可針對您所有的 Azure 訂用帳戶提供整合式安全性監視和原則管理。</span><span class="sxs-lookup"><span data-stu-id="3fc36-293">[Azure Security Center][security-center] provides integrated security monitoring and policy management across your Azure subscriptions.</span></span>
- <span data-ttu-id="3fc36-294">[Azure 安全性文件][security-documentation]</span><span class="sxs-lookup"><span data-stu-id="3fc36-294">[Azure Security Documentation][security-documentation]</span></span>
- <span data-ttu-id="3fc36-295">[Microsoft 信任中心][trust-center]</span><span class="sxs-lookup"><span data-stu-id="3fc36-295">[Microsoft Trust Center][trust-center]</span></span>

<!-- links -->

[dr-guidance]: ../resiliency/disaster-recovery-azure-applications.md
[identity-ref-arch]: ../reference-architectures/identity/index.md
[resiliency]: ../reliability/index.md

[ad-subscriptions]: /azure/active-directory/active-directory-how-subscriptions-associated-directory
[data-warehouse-encryption]: /azure/data-lake-store/data-lake-store-security-overview#data-protection
[cosmosdb-encryption]: /azure/cosmos-db/database-security
[rbac]: /azure/active-directory/role-based-access-control-what-is
[paired-region]: /azure/best-practices-availability-paired-regions
[resource-manager-auditing]: /azure/azure-resource-manager/resource-group-audit
[security-blog]: https://azure.microsoft.com/blog/tag/security/
[security-center]: https://azure.microsoft.com/services/security-center/
[security-documentation]: /azure/security/
[sql-db-encryption]: /azure/sql-database/sql-database-always-encrypted-azure-key-vault
[storage-encryption]: /azure/storage/storage-service-encryption
[trust-center]: https://azure.microsoft.com/support/trust-center/

<!-- patterns -->
[availability-patterns]: ../patterns/category/availability.md
[management-patterns]: ../patterns/category/management-monitoring.md
[resiliency-patterns]: ../patterns/category/resiliency.md
[scalability-patterns]: ../patterns/category/performance-scalability.md

<!-- practices -->
[autoscale]: ../best-practices/auto-scaling.md
[background-jobs]: ../best-practices/background-jobs.md
[caching]: ../best-practices/caching.md
[cdn]: ../best-practices/cdn.md
[data-partitioning]: ../best-practices/data-partitioning.md
[monitoring]: ../best-practices/monitoring.md
[retry-service-specific]: ../best-practices/retry-service-specific.md
[transient-fault-handling]: ../best-practices/transient-faults.md

<!-- checklist -->
[devops-checklist]: ../checklist/dev-ops.md
[scalability-checklist]: ../checklist/scalability.md
