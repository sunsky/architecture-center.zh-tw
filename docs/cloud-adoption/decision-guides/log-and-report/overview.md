---
title: CAF：記錄與報告決策指南
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
ms.date: 02/11/2019
description: 了解 Azure 移轉中的新服務：記錄、報告和監視。
author: rotycenh
ms.openlocfilehash: 36552488872622ec59e2fcf4816da4184c3d4fbf
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/08/2019
ms.locfileid: "55900943"
---
# <a name="logging-and-reporting-decision-guide"></a>記錄與報告決策指南

所有組織都需要通知機制，以在效能、運作時間與安全性產生疑慮時通知 IT 小組，避免疑慮變成嚴重的問題。 成功的監視策略可讓您了解工作負載和網路基礎結構個別構成元件的執行狀況。 在公用雲端移轉的情況下，將記錄和報告與任何現有的監視系統整合，同時向正確的 IT 人員呈現適當的重要事件和度量至關重要，因為這可以確保您的組織符合運作時間、安全性和原則合規性目標。

![規劃符合下列快速連結的記錄、報告和監視選項 (從最簡單到最複雜)](../../_images/discovery-guides/discovery-guide-logs-and-reporting.png)

跳至：[規劃監視基礎結構](#planning-your-monitoring-infrastructure) | [雲端原生](#cloud-native) | [內部部署擴充](#on-premises-extension) | [閘道彙總](#gateway-aggregation)  | [混合式監視 (內部部署)](#hybrid-monitoring-on-premises) | [混合式監視 (雲端式)](#hybrid-monitoring-cloud-based) | [多重雲端](#multi-cloud) | [進一步瞭解](#learn-more)

判斷雲端身分識別策略時，關鍵點主要是依據您的組織在作業流程上所做的現有投資，以及對多重雲端策略在某種程度上的支援需求。

有多種方式可用於記錄和報告雲端活動。 雲端原生和集中式記錄是運用訂用帳戶設計和訂用帳戶數目的兩個常見軟體即服務 (SaaS) 選項。

## <a name="planning-your-monitoring-infrastructure"></a>規劃監視基礎結構

規劃部署時，需考量記錄資料儲存位置，以及如何將雲端式報告和監視服務與現有的處理程序和工具整合。

| 問題 | 雲端原生 | 內部部署擴充功能 | 混合式監視 | 閘道彙總 |
|-----|-----|-----|-----|-----|
| 您已經擁有內部部署監視基礎結構嗎？ | 否 | yes | 是 |  否 |
| 您有避免將記錄資料儲存在外部儲存位置的需求嗎？ | 否 | yes | 否 | 否 |
| 您需要整合雲端監視與內部部署系統嗎？ | 否 | 否 | yes | 否 |
您需要先處理或篩選遙測資料再將它們提交至監視系統嗎？ | 否 | 否 | 否 | yes |

### <a name="cloud-native"></a>雲端原生

如果您的組織目前尚未建置記錄和報告系統，或您規劃的雲端部署不需要與現有內部部署或其他外部監視系統整合，雲端原生 SaaS 解決方案就是您最簡單的選擇。

在此案例中，記錄資料的記錄和儲存作業都是在與您工作負載相同的雲端環境中執行，處理資訊並向 IT 人員呈現資訊的記錄和報告工具則是由雲端平台提供。

雲端原生記錄解決方案可以依據較小型或實驗性部署的訂用帳戶或工作負載進行實作，並以集中方式安排組織，以監控整個雲環境的記錄資料。

**雲端原生假設事項**。 使用雲端原生記錄和報告系統時會假設以下事項：

- 您不需要將記錄資料從雲端工作負載整合到現有的內部部署系統中。
- 您將不會使用雲端式報告系統監視內部部署系統。

### <a name="on-premises-extension"></a>內部部署擴充功能

在需要將雲端遙測資料與內部部署系統整合的情況下，無論是內部部署系統不支援混合式記錄和報告，或支援在進行最少開發作業情況下移轉應用程式和服務的，都必須在 VM 中部署會將記錄資料直接傳送至您的內部部署系統，而不是將資料儲存在雲端環境中的代理程式。

為了支援這種方法，您的雲端資源必須能夠透過結合[混合式網路功能](../software-defined-network/hybrid.md)和[雲端裝載網域服務](../identity/overview.md#cloud-hosted-domain-services)，直接與您的內部部署系統通訊。 然後雲端虛擬網路才能以內部部署環境網路擴充功能的形式運作。 如此一來，雲端裝載工作負載才能直接與您的內部部署記錄和報告系統通訊。

這個方法會運用您在監控工具上的現有投資，對任何雲端部署的應用程序或服務進行有限的修改。 這通常進行移植移轉時支援監視的最快方法。 但是這不會擷取雲端 PaaS 和 SaaS 資源製造的記錄資料，而且將會省略雲端平台產生的任何 VM 相關記錄，例如 VM 狀態。 因此應將此模式視為實作更完善混合式監視解決方案之前的暫時性解決方案。

僅限內部部署的假設事項：

- 您只需要在內部部署環境中維護記錄資料 (基於支援技術需求或法規或原則需求)。
- 您的內務部署系統不支援混合式記錄和報告或閘道彙總解決方案。
- 您的雲端式應用程式可以直接向內部記錄系統提交遙測資料，或向內部部署系統提交遙測資料的監視代理程式可以部署至工作負載 VM。
- 您的工作負載無須依賴需要雲端式記錄和報告的 PaaS 或 SaaS 服務。

### <a name="gateway-aggregation"></a>閘道彙總

對於雲端遙測資料量很大，或現有內部部署監視系統需要先修改記錄資料才能加以處理的案例，可能就需要記錄資料[閘道彙總](../../../patterns/gateway-aggregation.md)服務。

閘道服務會部署至您的雲端提供者。 然後將相關應用程式和服務設定為提交遙測資料給閘道，而不是提交給預設的記錄系統。 接著閘道可以處理資料 (彙總、結合或設定資料格式)，然後再將資料提交給您的監視服務以進行擷取及分析。

此外，閘道也可以用來彙總及預先處理要提交給雲端或混合式系統的遙測資料。

閘道彙總假設事項：

- 您預期您的雲端式應用程式或服務將會產生大量遙測資料。
- 您需要先設定遙測資料格式或將資料最佳化，才能將它們提交給監視系統。
- 您的監視系統具備可用來擷取閘道處理後的記錄資料的 API 或其他機制。

### <a name="hybrid-monitoring-on-premises"></a>混合式監視 (內部部署)

混合式監視解決方案可結合來自內部部署和雲端資源的記錄資料，以提供 IT 資產運作狀態的整合式檢視。

如果您已經投資並擁有取代難度高或取代代價高昂的內部部署監視系統，就可能需要將來自雲端工作負載的遙測資料整合到現有的內部部署監視解決方案。 在混合式內部部署監視系統中，內部部署遙測資料會繼續使用現有的內部部署監視系統。 雲端遙測資料則會直接傳送至雲端監視系統，或者與您的工作負載一起儲存在雲端，然後定期經過編譯並擷取到內部部署系統中。

**內部部署混合式監視假設事項**。 使用內部部署記錄和報告系統以進行混合式監視時會假設以下事項：

- 您需要使用現有的內部部署報告系統監視雲端工作負載。
- 您需要維護記錄資料內部部署的擁有權。
- 您的內部部署管理系統具備可用來從雲端系統擷取記錄資料的 API 或其他機制。

> [!TIP]
> 由於雲端移轉具有反覆性，因此可能會從不同的雲端原生和內部部署監視轉換成部分混合式方法。 請務必保留變更到您的監視結構與整體 IT 和作業程序。請務必根據整體 IT 和作業流程對監視基礎結構持續進行更改。

### <a name="hybrid-monitoring-cloud-based"></a>混合式監視 (雲端式)

如果您沒有需維護內部部署監視系統的迫切需求，或想要以 SaaS 解決方案取代內部部署監視系統，您也可以選擇整合內部部署記錄資料與集中式雲端監視系統。

鏡像內部部署集中式方式 (在此案例中，雲端工作負載會使用其預設的雲端記錄機制)，與內部部署應用程式和服務會將遙測資料目錄傳送至雲端式記錄系統，或定期彙總該資料以擷取至雲端系統中。 雲端式監視系統就能作為您整個 IT 資產的主要監視與報告系統。

雲端混合式監視假設事項：使用雲端式記錄和報告系統以進行混合式監視時會假設以下事項：

- 您不依賴現有的內部部署監視系統。
- 您的工作負載沒有需將記錄資料儲存在內部部署系統的法規或原則需求。
- 您的雲端式管理系統具備可用來從內部部署應用程式和服務擷取記錄資料的 API 或其他機制。

### <a name="multi-cloud"></a>多重雲端

跨多個雲端平台整合記錄和報告功能可能會是非常複雜的工作。 平台之間提供的服務通常無法直接比較，而且這些服務提供的記錄與遙測功能也不盡相同。
多重雲端記錄支援通常需要先使用閘道服務將記錄資料處理成通用格式，然後再將資料提交給混合式記錄解決方案。

## <a name="learn-more"></a>深入了解

[Azure 監視器](/azure/azure-monitor/overview)是 Azure 預設的報告和監視服務。 它提供：

- 一個統一平台，用來收集應用程式遙測資料、主機遙測資料 (例如 VM)、容器計量、Azure 平台計量，以及事件記錄檔。
- 視覺效果、查詢、警示和分析工具。 它可提供虛擬機器、客體作業系統、虛擬網路，以及工作負載應用程式事件的深入解析。
- [REST API](/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough)，用來與外部服務整合，以及將監視與警示服務自動化
- 與許多熱門的第三方廠商[整合](/azure/monitoring-and-diagnostics/monitoring-partners)。
