---
title: 在 Azure 上加速數位映像式模型化
titleSuffix: Azure Example Scenarios
description: 使用 Avere 和 Agisoft PhotoScan 在 Azure 上加速數位映像式模型化
author: adamboeglin
ms.date: 1/11/2019
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: cat-team, Linux, HPC
social_image_url: /azure/architecture/example-scenario/infrastructure/media/architecture-image-modeling.png
ms.openlocfilehash: 87b43347fb5f4baec0081a67c8b003dccd2fdf0d
ms.sourcegitcommit: 14226018a058e199523106199be9c07f6a3f8592
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/31/2019
ms.locfileid: "55483006"
---
# <a name="accelerate-digital-image-based-modeling-on-azure"></a><span data-ttu-id="aa0e6-103">在 Azure 上加速數位映像式模型化</span><span class="sxs-lookup"><span data-stu-id="aa0e6-103">Accelerate digital image-based modeling on Azure</span></span>

<span data-ttu-id="aa0e6-104">此範例案例針對任何想要在 Azure 基礎結構即服務 (IaaS) 上執行映像式模型化的組織，提供架構和設計指引。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-104">This example scenario provides architecture and design guidance for any organization that wants to perform image-based modeling on Azure infrastructure-as-a-service (IaaS).</span></span> <span data-ttu-id="aa0e6-105">此案例的設計訴求是在使用高效能儲存體 (加快處理時間) 的 Azure 虛擬機器 (VM) 上執行攝影測量軟體。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-105">The scenario is designed for running photogrammetry software on Azure Virtual Machines (VMs) using high-performance storage that accelerates processing time.</span></span> <span data-ttu-id="aa0e6-106">此環境可以視需要相應放大和縮小，且支援數 TB 的儲存體，而不會犧牲效能。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-106">The environment can be scaled up and down as needed and supports terabytes of storage without sacrificing performance.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="aa0e6-107">相關使用案例</span><span class="sxs-lookup"><span data-stu-id="aa0e6-107">Relevant use cases</span></span>

<span data-ttu-id="aa0e6-108">相關使用案例包括：</span><span class="sxs-lookup"><span data-stu-id="aa0e6-108">Relevant use cases include:</span></span>

- <span data-ttu-id="aa0e6-109">大樓、工程結構和鑑識意外現場的模型化和測量。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-109">Modeling and measuring buildings, engineering structures, and forensic accident scenes.</span></span>
- <span data-ttu-id="aa0e6-110">製作電腦遊戲與電影的視覺效果。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-110">Creating visual effects for computer games and movies.</span></span>
- <span data-ttu-id="aa0e6-111">使用數位映像，如同在都市規劃和其他應用程式中，間接產生各種規模的物件測量。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-111">Using digital images to indirectly generate measurements of objects of various scales as in urban planning and other applications.</span></span>

## <a name="architecture"></a><span data-ttu-id="aa0e6-112">架構</span><span class="sxs-lookup"><span data-stu-id="aa0e6-112">Architecture</span></span>

<span data-ttu-id="aa0e6-113">這個範例說明如何使用由 Avere vFXT 儲存體支援的 Agisoft PhotoScan 攝影測量軟體。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-113">This example describes the use of Agisoft PhotoScan photogrammetry software backed by Avere vFXT storage.</span></span> <span data-ttu-id="aa0e6-114">PhotoScan 在地理資訊系統 (GIS) 應用程式、文化遺產文獻、遊戲開發，以及視覺效果製作方面大受歡迎。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-114">PhotoScan was chosen for its popularity in geographic information system (GIS) applications, cultural heritage documentation, game development, and visual effects production.</span></span> <span data-ttu-id="aa0e6-115">它很適合用於近景攝影測量和航空攝影測量。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-115">It is suitable for both close-range photogrammetry and aerial photogrammetry.</span></span>

<span data-ttu-id="aa0e6-116">本文的概念適用於任何以排程器為基礎的高效能運算 (HPC) 工作量，以及當作基礎結構管理的背景工作角色節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-116">The concepts in this article apply to any high-performance computing (HPC) workload based on a scheduler and worker nodes managed as infrastructure.</span></span>  <span data-ttu-id="aa0e6-117">對此工作負載，Avere vFXT 因為其在基準測試期間的優異效能而受到青睞。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-117">For this workload, Avere vFXT was selected for its superior performance during benchmark tests.</span></span>  <span data-ttu-id="aa0e6-118">不過，此案例將儲存體與處理分開，以便使用其他儲存體解決方案 (請參閱本文件稍後的[替代項目](#alternatives))。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-118">However, the scenario decouples the storage from the processing so that other storage solutions can be used (see [alternatives](#alternatives) later in this document).</span></span>

<span data-ttu-id="aa0e6-119">此架構也包含 Active Directory 網域控制站，以控制 Azure 資源的存取權並透過網域名稱系統 (DNS) 提供內部名稱解析。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-119">This architecture also includes Active Directory domain controllers to control access to Azure resources and provide internal name resolution through the Domain Name System (DNS).</span></span> <span data-ttu-id="aa0e6-120">Jumpbox 可供系統管理員存取執行此解決方案的 Windows 和 Linux VM。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-120">Jump boxes provide administrator access to the Windows and Linux VMs that run the solution.</span></span>

![架構圖表](./media/architecture-image-modeling.png)

1. <span data-ttu-id="aa0e6-122">使用者可將數個映像提交至 PhotoScan。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-122">User submits a number of images to PhotoScan.</span></span>
2. <span data-ttu-id="aa0e6-123">PhotoScan Scheduler 會在作為前端節點並指示使用者映像處理的 Windows VM 上執行。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-123">The PhotoScan Scheduler runs on a Windows VM that serves as the head node and directs processing of the user's images.</span></span>
3. <span data-ttu-id="aa0e6-124">PhotoScan 會搜尋相片的共通點，並使用在具有圖形處理器 (GPU) 的 VM 上執行的 PhotoScan 處理節點建構幾何 (mesh)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-124">PhotoScan searches for common points on the photographs and constructs the geometry (mesh) using the PhotoScan processing nodes running on VMs with graphics processing units (GPUs).</span></span>
4. <span data-ttu-id="aa0e6-125">Avere vFXT 會在以網路檔案系統版本 3 (NFSv3) 為基礎且至少由四部 VM 所組成的 Azure 上，提供高效能儲存體解決方案。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-125">Avere vFXT provides a high-performance storage solution on Azure based on Network File System version 3 (NFSv3) and comprised of at least four VMs.</span></span>
5. <span data-ttu-id="aa0e6-126">PhotoScan 可轉譯模型。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-126">PhotoScan renders the model.</span></span>

### <a name="components"></a><span data-ttu-id="aa0e6-127">元件</span><span class="sxs-lookup"><span data-stu-id="aa0e6-127">Components</span></span>

- <span data-ttu-id="aa0e6-128">[Agisoft PhotoScan](http://www.agisoft.com/)：PhotoScan Scheduler 在 Windows 2016 Server VM 上執行，而處理節點會使用五部執行 CentOS Linux 7.5 且具有 GPU 的 VM。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-128">[Agisoft PhotoScan](http://www.agisoft.com/): The PhotoScan Scheduler runs on a Windows 2016 Server VM, and the processing nodes use five VMs with GPUs that run CentOS Linux 7.5.</span></span>
- <span data-ttu-id="aa0e6-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) 是檔案快取解決方案，其使用物件儲存體和傳統網路連接儲存裝置 (NAS) 將大型資料集的儲存體最佳化。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) is a file caching solution that uses object storage and traditional network-attached storage (NAS) to optimize storage of large datasets.</span></span> <span data-ttu-id="aa0e6-130">其中包括：</span><span class="sxs-lookup"><span data-stu-id="aa0e6-130">It includes:</span></span>
  - <span data-ttu-id="aa0e6-131">Avere Controller。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-131">Avere Controller.</span></span> <span data-ttu-id="aa0e6-132">此 VM 會執行指令碼，以安裝 Avere vFXT 叢集並執行 Ubuntu 18.04 LTS。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-132">This VM executes the script that installs the Avere vFXT cluster and runs Ubuntu 18.04 LTS.</span></span> <span data-ttu-id="aa0e6-133">此 VM 稍後可用於新增或移除叢集節點，以及終結叢集。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-133">The VM can be used later to add or remove cluster nodes and to destroy the cluster as well.</span></span>
  - <span data-ttu-id="aa0e6-134">vFXT 叢集。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-134">vFXT cluster.</span></span> <span data-ttu-id="aa0e6-135">至少使用三部 VM，以 Avere OS 5.0.2.1 為基礎的每個 Avere vFXT 節點各使用一部 VM。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-135">At least three VMs are used, one for each of the Avere vFXT nodes based on Avere OS 5.0.2.1.</span></span> <span data-ttu-id="aa0e6-136">這些 VM 會形成 vFXT 叢集，而該叢集會連結到 Azure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-136">These VMs form the vFXT cluster, which is attached to Azure Blob storage.</span></span>
- <span data-ttu-id="aa0e6-137">[Microsoft Active Directory 網域控制站](/windows/desktop/ad/active-directory-domain-services)可讓主機存取網域資源並提供 DNS 名稱解析。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-137">[Microsoft Active Directory domain controllers](/windows/desktop/ad/active-directory-domain-services) allow the host access to domain resources and provide DNS name resolution.</span></span> <span data-ttu-id="aa0e6-138">Avere vFXT 會新增許多 A 記錄，例如 vFXT 叢集中的每筆 A 記錄都會指向每個 Avere vFXT 節點的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-138">Avere vFXT adds a number of A records—for example, each A record in a vFXT cluster points to the IP address of each Avere vFXT node.</span></span> <span data-ttu-id="aa0e6-139">在此設定中，所有 VM 都會使用循環配置資源模式來存取 vFXT 匯出。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-139">In this setup, all VMs use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="aa0e6-140">[其他 VM](/azure/virtual-machines/) 作為系統管理員用來存取排程器和處理節點的 Jumpbox。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-140">[Other VMs](/azure/virtual-machines/) serve as jump boxes used by the administrator to access the scheduler and processing nodes.</span></span> <span data-ttu-id="aa0e6-141">Windows Jumpbox 是必要的，可允許系統管理員透過遠端桌面通訊協定存取前端節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-141">The Windows jumpbox is mandatory to allow the administrator to access the head node via remote desktop protocol.</span></span> <span data-ttu-id="aa0e6-142">第二個 Jumpbox 是選擇性的，其執行 Linux 以便管理背景工作節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-142">The second jumpbox is optional and runs Linux for administration of the worker nodes.</span></span>
- <span data-ttu-id="aa0e6-143">[網路安全性群組](/azure/virtual-network/manage-network-security-group) (NSG) 會限制公用 IP 位址 (PIP) 的存取，以及允許連接埠 3389 和 22 存取連結到 Jumpbox 子網路的 VM。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-143">[Network security groups](/azure/virtual-network/manage-network-security-group) (NSGs) limit access to the public IP address (PIP) and allow ports 3389 and 22 for access to the VMs attached to the Jumpbox subnet.</span></span>
- <span data-ttu-id="aa0e6-144">[虛擬網路對等互連](/azure/virtual-network/virtual-network-peering-overview)會將 PhotoScan 虛擬網路連線至 Avere 虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-144">[Virtual network peering](/azure/virtual-network/virtual-network-peering-overview) connects a PhotoScan virtual network to an Avere virtual network.</span></span>
- <span data-ttu-id="aa0e6-145">[Azure Blob 儲存體](/azure/storage/blobs/storage-blobs-introduction)搭配 Avere vFXT 運作，以作為核心檔案管理工具來儲存正在處理的已認可資料。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-145">[Azure Blob storage](/azure/storage/blobs/storage-blobs-introduction) works with Avere vFXT as the core filer to store the committed data being processed.</span></span> <span data-ttu-id="aa0e6-146">Avere vFXT 可識別 Azure Blob 中儲存的有效資料，並將該資料放入固態硬碟 (SSD)，而當 PhotoScan 作業正在執行時，這些固態硬碟用於在其計算節點中快取。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-146">Avere vFXT identifies the active data stored in Azure Blob and tiers it into solid-state drives (SSD) used for caching in its compute nodes while a PhotoScan job is running.</span></span> <span data-ttu-id="aa0e6-147">如果進行了變更，資料會以非同步方式認可回到核心檔案管理工具。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-147">If changes are made, the data is asynchronously committed back to the core filer.</span></span>
- <span data-ttu-id="aa0e6-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) 用來儲存系統管理員密碼和 PhotoScan 啟用碼。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) is used to store the administrator passwords and PhotoScan activation code.</span></span>

### <a name="alternatives"></a><span data-ttu-id="aa0e6-149">替代項目</span><span class="sxs-lookup"><span data-stu-id="aa0e6-149">Alternatives</span></span>

- <span data-ttu-id="aa0e6-150">若要利用 Azure 服務來管理 HPC 叢集，請使用 Azure CycleCloud 或 Azure Batch 之類的工具，而不是透過範本或指令碼管理資源。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-150">To take advantage of Azure services for managing an HPC cluster, use tools such as Azure CycleCloud or Azure Batch instead of managing the resources through templates or scripts.</span></span>
- <span data-ttu-id="aa0e6-151">部署 BeeGFS 平行虛擬檔案系統，作為 Azure 上 (而非 Avere vFXT) 的後端儲存體。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-151">Deploy the BeeGFS parallel virtual file system as the back-end storage on Azure instead of Avere vFXT.</span></span> <span data-ttu-id="aa0e6-152">使用 [BeeGFS 範本](https://github.com/paulomarquesc/beegfs-template)在 Azure 上部署此端對端解決方案。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-152">Use the [BeeGFS template](https://github.com/paulomarquesc/beegfs-template) to deploy this end-to-end solution on Azure.</span></span>
- <span data-ttu-id="aa0e6-153">部署您所選的儲存體解決方案，例如 GlusterFS、Lustre 或 Windows Storage Spaces Direct。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-153">Deploy the storage solution of your choice, such as GlusterFS, Lustre, or Windows Storage Spaces Direct.</span></span> <span data-ttu-id="aa0e6-154">若要這麼做，請編輯 [PhotoScan 範本](https://github.com/paulomarquesc/photoscan-template)以使用您想要的儲存體解決方案。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-154">To do this, edit the [PhotoScan template](https://github.com/paulomarquesc/photoscan-template) to work with the storage solution you want.</span></span>
- <span data-ttu-id="aa0e6-155">部署 Windows 作業系統 (而非預設選項 Linux) 的背景工作節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-155">Deploy the worker nodes with the Windows operating system instead of Linux, the default option.</span></span> <span data-ttu-id="aa0e6-156">在選擇 Windows 節點時，部署範本不會執行儲存體整合選項。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-156">When choosing Windows nodes, storage integration options are not executed by the deployment templates.</span></span> <span data-ttu-id="aa0e6-157">您必須手動整合此環境與現有的儲存體解決方案，或自訂 PhotoScan 範本以提供這類自動化功能 (如[存放庫](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md)中所述)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-157">You must manually integrate the environment with an existing storage solution, or customize the PhotoScan template to provide such automation, as described in the [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span></span>

## <a name="considerations"></a><span data-ttu-id="aa0e6-158">考量</span><span class="sxs-lookup"><span data-stu-id="aa0e6-158">Considerations</span></span>

<span data-ttu-id="aa0e6-159">此案例經過特別設計，以提供 HPC 工作負載適用的高效能儲存體 (無論是部署在 Windows 或 Linux 上)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-159">This scenario is designed specifically to provide high-performance storage for an HPC workload, whether it is deployed on Windows or Linux.</span></span> <span data-ttu-id="aa0e6-160">一般而言，HPC 工作負載的儲存體組態，應符合內部部署適用的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-160">In general, the storage configuration of the HPC workload should match the appropriate best practices used for on-premises deployments.</span></span>

<span data-ttu-id="aa0e6-161">部署考量取決於所使用的應用程式和服務，但適用少數注意事項：</span><span class="sxs-lookup"><span data-stu-id="aa0e6-161">Deployment considerations depend on the applications and services used, but a few notes apply:</span></span>

- <span data-ttu-id="aa0e6-162">建置高效能應用程式時，請使用 Azure 進階儲存體及[最佳化應用程式層](/azure/virtual-machines/windows/premium-storage-performance)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-162">When building high-performance applications, use Azure Premium Storage and [optimize the application layer](/azure/virtual-machines/windows/premium-storage-performance).</span></span> <span data-ttu-id="aa0e6-163">使用 Azure Blob 儲存體[經常性存取層存取](/azure/storage/blobs/storage-blob-storage-tiers)將儲存體最佳化，以便頻繁存取。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-163">Optimize storage for frequent access using Azure Blob [hot tier access](/azure/storage/blobs/storage-blob-storage-tiers).</span></span>
- <span data-ttu-id="aa0e6-164">使用符合您的可用性和效能需求的儲存體[複寫選項](/azure/storage/common/storage-redundancy)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-164">Use a storage [replication option](/azure/storage/common/storage-redundancy) that that meets your availability and performance requirements.</span></span> <span data-ttu-id="aa0e6-165">在此範例中，Avere vFXT 已根據預設針對高可用性而設定，且具有本地備援儲存體 (LRS)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-165">In this example, Avere vFXT is configured for high availability by default, with locally redundant storage (LRS).</span></span> <span data-ttu-id="aa0e6-166">為了平衡負載，此設定中的所有 VM 都會使用循環配置資源模式來存取 vFXT 匯出。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-166">For load balancing, all VMs in this setup use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="aa0e6-167">如果後端儲存體將由 Windows 用戶端和 Linux 用戶端取用，請使用 Samba 伺服器支援 Windows 節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-167">If the backend storage will be consumed by both Windows clients and Linux clients, use Samba servers to support the Windows nodes.</span></span> <span data-ttu-id="aa0e6-168">此範例案例 (以 BeeGFS 為基礎) 的[版本](https://github.com/paulomarquesc/beegfs-template)使用 Samba 來支援在 Windows 上執行的 HPC 工作負載 (PhotoScan) 排程器節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-168">A [version](https://github.com/paulomarquesc/beegfs-template) of this example scenario based on BeeGFS uses Samba to support the scheduler node of the HPC workload (PhotoScan) running on Windows.</span></span> <span data-ttu-id="aa0e6-169">部署負載平衡器，其作用如同 DNS 循環配置資源的智慧代替物。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-169">A load balancer is deployed to act like a smart replacement for DNS round robin.</span></span>
- <span data-ttu-id="aa0e6-170">使用最適合您的 [Windows](/azure/virtual-machines/windows/sizes-hpc) 或 [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 工作負載的 VM 類型，執行 HPC 應用程式。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-170">Run HPC applications using the VM type best suited for your [Windows](/azure/virtual-machines/windows/sizes-hpc) or [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) workload.</span></span>
- <span data-ttu-id="aa0e6-171">若要隔離 HPC 工作負載與儲存體資源，請將其各自部署在自己的虛擬網路中，然後使用虛擬網路[對等互連](/azure/virtual-network/virtual-network-peering-overview)來連接兩者。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-171">To isolate the HPC workload from the storage resources, deploy each in its own virtual network, then use virtual network [peering](/azure/virtual-network/virtual-network-peering-overview) to connect the two.</span></span> <span data-ttu-id="aa0e6-172">對等互連會在不同虛擬網路中的資源之間建立低延遲、高頻寬的連線，且僅透過私人 IP 位址在 Microsoft 骨幹基礎結構中傳送流量。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-172">Peering creates a low-latency, high-bandwidth connection between resources in different virtual networks and routes traffic through the Microsoft backbone infrastructure through private IP addresses only.</span></span>

### <a name="security"></a><span data-ttu-id="aa0e6-173">安全性</span><span class="sxs-lookup"><span data-stu-id="aa0e6-173">Security</span></span>

<span data-ttu-id="aa0e6-174">此範例著重於部署 HPC 工作負載適用的高效能儲存體解決方案，並不是安全性解決方案。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-174">This example focuses on deploying a high-performance storage solution for an HPC workload and is not a security solution.</span></span> <span data-ttu-id="aa0e6-175">務必與您的安全性小組商討任何變更。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-175">Make sure to involve your security team for any changes.</span></span>

<span data-ttu-id="aa0e6-176">為了提高安全性，此範例基礎結構可讓所有 Windows VM 加入網域，並使用 Active Directory 進行集中驗證。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-176">For added security, this example infrastructure enables all the Windows VMs to be domain-joined and uses Active Directory for central authentication.</span></span> <span data-ttu-id="aa0e6-177">它也針對所有 VM 提供自訂 DNS 服務。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-177">It also provides custom DNS services for all VMs.</span></span> <span data-ttu-id="aa0e6-178">為了協助保護環境，此範本依賴[網路安全性群組 (NSG)](/azure/virtual-network/security-overview)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-178">To help protect the environment, this template relies on [network security groups (NSGs)](/azure/virtual-network/security-overview).</span></span> <span data-ttu-id="aa0e6-179">NSG 提供基本的流量篩選條件和安全性規則。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-179">NSGs offer basic traffic filters and security rules.</span></span>

<span data-ttu-id="aa0e6-180">請考慮下列選項，進一步改善此案例的安全性：</span><span class="sxs-lookup"><span data-stu-id="aa0e6-180">Consider the following options to further improve security in this scenario:</span></span>

- <span data-ttu-id="aa0e6-181">使用網路虛擬設備，例如 Fortinet、Checkpoint 和 Juniper。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-181">Use network virtual appliances such as Fortinet, Checkpoint, and Juniper.</span></span>
- <span data-ttu-id="aa0e6-182">將[角色型存取控制](/azure/role-based-access-control/overview)套用到資源群組。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-182">Apply [role-based access control](/azure/role-based-access-control/overview) to the resource groups.</span></span>
- <span data-ttu-id="aa0e6-183">如果透過網際網路存取 Jumpbox，請啟用 VM [JIT](/azure/security-center/security-center-just-in-time) 存取。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-183">Enable VM [JIT](/azure/security-center/security-center-just-in-time) access if jump boxes are accessed via the Internet.</span></span>
- <span data-ttu-id="aa0e6-184">使用 [Azure Key Vault](/azure/key-vault/quick-create-portal) 來儲存系統管理員帳戶所使用的密碼。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-184">Use [Azure Key Vault](/azure/key-vault/quick-create-portal) to store the passwords used by administrator accounts.</span></span>

## <a name="pricing"></a><span data-ttu-id="aa0e6-185">價格</span><span class="sxs-lookup"><span data-stu-id="aa0e6-185">Pricing</span></span>

<span data-ttu-id="aa0e6-186">執行此案例的成本因諸多因素而大不相同。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-186">The cost of running this scenario can vary greatly depending on on multiple factors.</span></span>  <span data-ttu-id="aa0e6-187">VM 的數目和大小，需要多少儲存體，以及完成作業所需的時間量將會決定您的成本。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-187">The number and size of VMs, how much storage is required, and the amount of time to complete a job will determine your cost.</span></span>

<span data-ttu-id="aa0e6-188">[Azure 定價計算機](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3)中以下的範例成本設定檔是以 Avere vFXT 和 PhotoScan 典型組態為基礎：</span><span class="sxs-lookup"><span data-stu-id="aa0e6-188">The following sample cost profile in the [Azure pricing calculator](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) is based on a typical configuration for Avere vFXT and PhotoScan:</span></span>

- <span data-ttu-id="aa0e6-189">1 部 A1\_v2 Ubuntu VM，可執行 Avere 控制站。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-189">1 A1\_v2 Ubuntu VM to run the Avere controller.</span></span>
- <span data-ttu-id="aa0e6-190">3 部 D16s\_v3 Avere OS VM，構成 vFXT 叢集的每個 Avere vFXT 節點各使用一部 VM。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-190">3 D16s\_v3 Avere OS VMs, one for each of the Avere vFXT nodes that form the vFXT cluster.</span></span>
- <span data-ttu-id="aa0e6-191">5 部 NC24\_v2 Linux VM，可提供 PhotoScan 處理節點所需的 GPU。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-191">5 NC24\_v2 Linux VMs to provide the GPUs needed by the PhotoScan processing nodes.</span></span>
- <span data-ttu-id="aa0e6-192">1 部 D8s\_v3 CentOS VM，適用於 PhotoScan 排程器節點。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-192">1 D8s\_v3 CentOS VM for the PhotoScan scheduler node.</span></span>
- <span data-ttu-id="aa0e6-193">1 部 DS2\_v2 CentOS，作為系統管理員 Jumpbox 使用。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-193">1 DS2\_v2 CentOS used as administrator jumpbox.</span></span>
- <span data-ttu-id="aa0e6-194">2 部 DS2\_v2 VM，適用於 Active Directory 網域控制站。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-194">2 DS2\_v2 VMs for the Active Directory domain controllers.</span></span>
- <span data-ttu-id="aa0e6-195">進階受控磁碟。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-195">Premium managed disks.</span></span>
- <span data-ttu-id="aa0e6-196">具有 LRS 和經常性存取層存取的一般用途 v2 (GPv2) Blob 儲存體 (只有 GPv2 儲存體帳戶可公開存取層屬性)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-196">General purpose v2 (GPv2) Blob storage with LRS and hot tier access (only GPv2 storage accounts expose the Access Tier attribute).</span></span>
- <span data-ttu-id="aa0e6-197">支援 10 TB 資料轉送的虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-197">Virtual network with support for 10 TB data transfer.</span></span>

<span data-ttu-id="aa0e6-198">如需此架構的詳細資訊，請參閱[電子書](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-198">For details about this architecture, see the [ebook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span> <span data-ttu-id="aa0e6-199">若要查看定價如何針對特定使用案例而變更，請在定價計算機中選擇不同的 VM 大小，以符合您預期的部署。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-199">To see how the pricing would change for your particular use case, choose different VM sizes in the pricing calculator to match your expected deployment.</span></span>

## <a name="deployment"></a><span data-ttu-id="aa0e6-200">部署</span><span class="sxs-lookup"><span data-stu-id="aa0e6-200">Deployment</span></span>

<span data-ttu-id="aa0e6-201">如需部署此架構的逐步指示 (包括使用 Avere FxT 或 BeeGFS 的所有必要條件)，請下載電子書：[在 Azure 上使用 Avere vFXT for Azure 或 BeeGFS 部署 Agisoft PhotoScan](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/)。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-201">For step-by-step instructions for deploying this architecture, including all the prerequisites for using either Avere FxT or BeeGFS, download the ebook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span>

## <a name="related-resources"></a><span data-ttu-id="aa0e6-202">相關資源</span><span class="sxs-lookup"><span data-stu-id="aa0e6-202">Related resources</span></span>

<span data-ttu-id="aa0e6-203">下列資源會提供此案例中所用元件的詳細資訊，以及在 Azure 上進行批次運算的替代方法。</span><span class="sxs-lookup"><span data-stu-id="aa0e6-203">The following resources will provide more information on the components utilized in this scenario, along with alternative approaches for batch computing on Azure.</span></span>

- <span data-ttu-id="aa0e6-204">[Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview) 概觀</span><span class="sxs-lookup"><span data-stu-id="aa0e6-204">Overview of [Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview)</span></span>
- <span data-ttu-id="aa0e6-205">[Agisoft PhotoScan](https://www.agisoft.com/) 首頁</span><span class="sxs-lookup"><span data-stu-id="aa0e6-205">[Agisoft PhotoScan](https://www.agisoft.com/) home Page</span></span>
- [<span data-ttu-id="aa0e6-206">Azure 儲存體效能與延展性檢查清單</span><span class="sxs-lookup"><span data-stu-id="aa0e6-206">Azure Storage Performance and Scalability Checklist</span></span>](/azure/storage/common/storage-performance-checklist)
- <span data-ttu-id="aa0e6-207">[Microsoft Azure 上的平行虛擬檔案系統：Lustre、GlusterFS 和 BeeGFS 的效能測試](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span><span class="sxs-lookup"><span data-stu-id="aa0e6-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span></span>
- <span data-ttu-id="aa0e6-208">[Azure 上的電腦輔助工程 (CAE)](/azure/architecture/example-scenario/apps/hpc-saas) 範例案例</span><span class="sxs-lookup"><span data-stu-id="aa0e6-208">An example scenario for [computer-aided engineering (CAE) on Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span></span>
- <span data-ttu-id="aa0e6-209">[Azure 上的高效能運算](https://azure.microsoft.com/en-us/solutions/high-performance-computing/)首頁</span><span class="sxs-lookup"><span data-stu-id="aa0e6-209">[HPC on Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) home page</span></span>
- <span data-ttu-id="aa0e6-210">[大量計算：HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/) 概觀</span><span class="sxs-lookup"><span data-stu-id="aa0e6-210">Overview of [Big Compute: HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span></span>